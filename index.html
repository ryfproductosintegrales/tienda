<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R&F Productos Integrales</title>
    <!-- Favicon: Asegúrate de que la ruta y el nombre del archivo coincida EXACTAMENTE con tu repositorio en GitHub (incluyendo mayúsculas/minúsculas) -->
    <link rel="icon" href="images/favicon.jpg" type="image/jpeg">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Fuentes personalizadas */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f8f8;
            color: #333;
        }
        /* Colores personalizados de Tailwind */
        .text-primary { color: #228B22; /* Verde Bosque */ }
        .bg-primary { background-color: #228B22; }
        /* Efecto de escala al pasar el ratón */
        .hover-scale:hover { transform: scale(1.05); transition: transform 0.2s ease-in-out; }
        /* Barra de desplazamiento personalizada para mejor estética */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Animaciones de aparición gradual */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        .animate-fade-in-delay {
            animation: fadeIn 1s ease-out forwards;
            animation-delay: 0.2s;
        }

        /* Estilos específicos del carrusel */
        .carousel-item {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.7s ease-in-out;
            opacity: 0;
            background-size: cover;
            background-position: center;
            display: flex; /* Siempre flex para posicionar contenido */
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 2rem;
            box-sizing: border-box;
        }
        .carousel-item.active {
            display: flex;
            opacity: 1;
        }
        .carousel-content {
            max-width: 800px;
            z-index: 10;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        .carousel-control-btn {
            background-color: rgba(0,0,0,0.5);
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 20;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            transition: background-color 0.3s;
        }
        .carousel-control-btn:hover {
            background-color: rgba(0,0,0,0.8);
        }
        .carousel-dots {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            display: flex;
            gap: 0.5rem;
        }
        .carousel-dot {
            width: 12px;
            height: 12px;
            background-color: rgba(255,255,255,0.5);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }
        .carousel-dot.active {
            background-color: rgba(255,255,255,1);
            transform: scale(1.2);
        }

        /* Contenido desplegable (para el pie de página plegable) */
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .collapsible-content.active {
            max-height: 200px; /* Ajusta según el contenido */
        }

        /* Estilo específico para el menú desplegable de la Tienda */
        .header-shop-dropdown {
            width: max-content; /* Asegura que el ancho del desplegable se adapte al contenido */
            min-width: 150px; /* Ancho mínimo para evitar menús muy estrechos */
            z-index: 50; /* Mayor z-index para asegurar que aparezca encima de otro contenido */
        }
    </style>
</head>
<body>
    <!-- Sección de Encabezado -->
    <header class="bg-white shadow-md py-4">
        <!-- Banner promocional superior -->
        <div id="promo-banner" class="bg-primary text-white text-center py-2 text-sm">
            Envío GRATIS por el consumo mínimo de RD$2,000 | Entrega en 24/48 horas | Confianza y pago seguro
        </div>
        <div class="container mx-auto px-4 flex items-center justify-between flex-wrap">
            <!-- Logo -->
            <a href="#home" class="flex items-center space-x-2 mr-6" onclick="navigateTo('home', null, event)">
                <!-- Ruta corregida directamente a 'images/favicon.jpg' -->
                <img src="images/favicon.jpg" alt="Logo R&F Productos Integrales" class="rounded-full w-10 h-10 object-contain">
                <span class="text-2xl font-bold text-primary">R&F Productos Integrales</span>
            </a>

            <!-- Barra de búsqueda -->
            <div class="flex-grow max-w-lg mx-auto order-last md:order-none w-full md:w-auto mt-4 md:mt-0">
                <div class="relative flex items-center w-full">
                    <input type="text" id="search-input" placeholder="Buscar productos..."
                           class="w-full pl-4 pr-10 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary">
                    <button id="search-button" class="absolute right-0 top-0 mt-0.5 mr-1.5 flex items-center justify-center p-2 rounded-full bg-primary text-white hover:bg-green-700 transition duration-200">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>

            <!-- Iconos/Enlaces de utilidad (Carrito, Lista de Deseos, Idioma) -->
            <div class="flex items-center space-x-4 ml-auto">
                <!-- Enlace al carrito -->
                <a href="#cart" id="cart-link" class="relative p-2 text-gray-600 hover:text-primary transition duration-200" onclick="navigateTo('cart', null, event)">
                    <i class="fas fa-shopping-cart text-xl"></i>
                    <span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
                <!-- Enlace a la Lista de Deseos -->
                <a href="#wishlist" id="wishlist-link" class="relative p-2 text-gray-600 hover:text-primary transition duration-200" onclick="navigateTo('wishlist', null, event)">
                    <i class="fas fa-heart text-xl"></i>
                    <span id="wishlist-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center" data-translate="wishlist">0</span>
                </a>
                <!-- Selector de Idioma -->
                <div class="relative group">
                    <button id="language-toggle" class="p-2 text-gray-600 hover:text-primary transition duration-200">
                        <i class="fas fa-globe text-xl"></i>
                    </button>
                    <div class="absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg py-1 z-10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                        <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="es" data-translate="spanish">Español</button>
                        <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-lang="en" data-translate="english">English</button>
                    </div>
                </div>
            </div>
            <!-- Información de Contacto (oculta en pantallas pequeñas, mostrada en medianas y grandes) -->
            <div class="hidden md:flex items-center space-x-2 ml-4">
                <i class="fas fa-phone text-primary"></i>
                <!-- Modificado: El número de teléfono ahora enlaza a WhatsApp -->
                <a href="https://wa.me/18094254540" target="_blank" class="text-gray-600 text-sm hover:text-primary transition duration-200" data-translate="phone">809-425-4540</a>
            </div>
        </div>
        <!-- Navegación Principal -->
        <nav class="bg-gray-100 py-3 mt-4 shadow-sm">
            <div class="container mx-auto px-4">
                <ul class="flex justify-center space-x-8 text-gray-700 font-medium text-lg flex-wrap">
                    <li><a href="#home" class="hover:text-primary transition duration-200" onclick="navigateTo('home', null, event)" data-translate="home">Inicio</a></li>
                    <li class="relative group">
                        <a href="#shop" class="hover:text-primary transition duration-200 inline-flex items-center" onclick="navigateTo('shop', null, event)" data-translate="shop">
                            Tienda <i class="fas fa-chevron-down text-xs ml-1"></i>
                        </a>
                        <!-- Se añadió una clase personalizada para el desplegable de la tienda para facilitar el estilo -->
                        <div class="header-shop-dropdown absolute left-0 mt-2 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                            <!-- Categorías pobladas dinámicamente aquí -->
                        </div>
                    </li>
                    <li><a href="#offers" class="hover:text-primary transition duration-200" onclick="navigateTo('offers', null, event)" data-translate="offers">Ofertas</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Área de Contenido Principal -->
    <main id="app-content" class="flex-grow container mx-auto px-4 py-8">
        <!-- El contenido se cargará dinámicamente aquí por JavaScript -->
    </main>

    <!-- Sección de Pie de Página -->
    <footer class="bg-gray-800 text-white py-10 mt-8 rounded-t-lg shadow-lg">
        <div class="container mx-auto px-4 grid grid-cols-1 gap-8">
            <!-- Sección de Redes Sociales y Newsletter -->
            <div>
                <h4 class="text-lg font-semibold mb-2 text-orange-400" data-translate="followUs">Síguenos</h4>
                <div class="flex space-x-4 mb-4">
                    <a href="https://www.facebook.com/productosintegralesryf" target="_blank" class="text-gray-300 hover:text-orange-200 text-2xl transition duration-200"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.instagram.com/prointegrales/" target="_blank" class="text-gray-300 hover:text-orange-200 text-2xl transition duration-200"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.youtube.com/channel/UCcWcm2tDvaTtgNG0L5nugMA" target="_blank" class="text-gray-300 hover:text-orange-200 text-2xl transition duration-200"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="text-gray-300 hover:text-orange-200 text-2xl transition duration-200"><i class="fab fa-tiktok"></i></a>
                </div>
                <h4 class="text-lg font-semibold mb-2 text-orange-400" data-translate="newsletter">Newsletter</h4>
                <form id="newsletter-form" class="flex">
                    <input type="email" placeholder="Tu correo electrónico" class="p-2 rounded-l-md focus:outline-none focus:ring-2 focus:ring-orange-400 text-gray-900 w-full" data-translate="yourEmail" required>
                    <button type="submit" class="bg-orange-500 text-white p-2 rounded-r-md hover:bg-orange-600 transition duration-200" data-translate="subscribe">
                        Suscribir
                    </button>
                </form>
            </div>
        </div>
        <div class="container mx-auto px-4 text-center text-sm text-gray-400 mt-8 border-t border-gray-700 pt-6">
            <p data-translate="copyright">&copy; 2025 R&F Productos Integrales. Todos los derechos reservados.</p>
            <p class="mt-2 text-xs" data-translate="disclaimer">
                Descargo de Responsabilidad: La información en este sitio no reemplaza el consejo médico. Los productos no están destinados a diagnosticar, tratar, curar o prevenir enfermedades. Consultar a un médico para dosis y frecuencia.
            </p>
        </div>
    </footer>

    <!-- Modales -->
    <!-- Modal de confirmación de carrito -->
    <div id="cart-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center">
            <h3 class="text-xl font-semibold mb-4" id="modal-title" data-translate="productAdded">Producto Añadido al Carrito</h3>
            <p class="text-gray-700 mb-6" id="modal-message" data-translate="addedSuccessfully">¡El producto ha sido añadido exitosamente a tu carrito de compras!</p>
            <button onclick="closeModal()" class="px-6 py-2 bg-primary text-white rounded-md hover:bg-green-700 transition duration-200" data-translate="close">Cerrar</button>
        </div>
    </div>

    <!-- Modal de confirmación de Lista de Deseos -->
    <div id="wishlist-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center">
            <h3 class="text-xl font-semibold mb-4" id="wishlist-modal-title" data-translate="productAdded">Producto Añadido a Lista de Deseos</h3>
            <p class="text-gray-700 mb-6" id="wishlist-modal-message" data-translate="addedSuccessfully">¡El producto ha sido añadido exitosamente a tu Lista de Deseos!</p>
            <button onclick="closeWishlistModal()" class="px-6 py-2 bg-primary text-white rounded-md hover:bg-green-700 transition duration-200" data-translate="close">Cerrar</button>
        </div>
    </div>

    <!-- Modal de Ficha Técnica (Ahora solo para información muy puntual, si se quiere) -->
    <div id="fichaTecnicaModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-xl max-w-lg w-11/12 md:w-3/4 lg:w-1/2 relative max-h-[90vh] overflow-y-auto">
            <button onclick="closeFichaTecnicaModal()" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold">&times;</button>
            <h3 class="text-2xl font-bold text-primary mb-4 text-center" id="modalTituloProducto"></h3>
            <div class="modal-body flex flex-col md:flex-row gap-4 items-center" id="modalCuerpoFicha">
                <!-- Contenido inyectado aquí -->
            </div>
        </div>
    </div>


    <script>
        // --- Funciones de Ayuda (Utilidades) ---
        // Convierte una cadena a kebab-case (ej. "Nombre Producto" -> "nombre-producto")
        function toKebabCase(string) {
            return string.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\s+/g, '-').replace(/[^a-z0-9-.]/g, '');
        }

        // Capitaliza la primera letra de cada palabra en una cadena
        function capitalizeEachWord(str) {
            return str.replace(/\b\w/g, char => char.toUpperCase());
        }
        
        // Obtiene una fecha aleatoria para simular "productos nuevos"
        function getRandomDate(start, end) {
            const date = new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
            return date.toISOString().split('T')[0]; // Formato YYYY-MM-DD
        }

        // --- Datos Globales y Constantes (¡Aquí es donde manejarás tus productos!) ---

        // La RUTA BASE para todas las imágenes. Asegúrate de que tu carpeta de imágenes
        // se llame 'images' (sin acento y todo en minúsculas) y esté en el mismo
        // nivel que tu archivo 'index.html'.
        const IMAGE_BASE_PATH = 'images/';

        /**
         * ¡IMPORTANTE!: Este es el LUGAR PRINCIPAL para gestionar la información de TUS PRODUCTOS.
         * Cada objeto en este arreglo representa un producto completo con TODOS sus datos.
         *
         * Para AÑADIR un nuevo producto:
         * 1. Copia una de las plantillas vacías al final de este arreglo.
         * 2. Pega el nuevo objeto.
         * 3. Rellena TODAS las propiedades con la información de tu producto.
         * 4. Asegúrate de que 'id' sea único y en kebab-case.
         * 5. Asegúrate de que 'imageFile' sea el NOMBRE EXACTO del archivo en tu carpeta 'images/' (ej. 'mi-foto.jpg').
         *
         * Para EDITAR un producto existente:
         * 1. Busca el producto por su 'name' o 'id' en este arreglo.
         * 2. Modifica directamente las propiedades que necesites (descripción, precios, etc.).
         *
         * Para ELIMINAR un producto:
         * 1. Simplemente borra el objeto completo del producto de este arreglo.
         */
        const ALL_PRODUCTS_DATA = [
            // --- EJEMPLO DE PRODUCTO COMPLETO: ACEITE DE AJONJOLÍ ---
            {
                id: 'aceite-de-ajonjoli',
                name: 'Aceite De Ajonjolí',
                imageFile: 'ajonjoli.jpg', // ¡Nombre EXACTO del archivo en tu carpeta 'images/'!
                category: 'Alimentación Saludable',
                brand: 'R&F Integrales',
                priceDetail: 1364.48, // Precio de detalle
                priceWholesale: 1090.55, // Precio al por mayor (si aplica)
                isOffer: false, // true si es una oferta destacada
                dateAdded: '2025-06-01', // Fecha de adición para "Nuevos Productos"
                salesCount: 250, // Conteo de ventas para "Más Vendidos"
                description_es: 'El aceite de ajonjolí es un potente antioxidante y antiinflamatorio, ideal para la salud interna y externa. Favorece la salud ósea y cardiovascular. Extraído en frío para preservar todas sus propiedades.',
                description_en: 'Sesame oil is a powerful antioxidant and anti-inflammatory, ideal for internal and external health. It promotes bone and cardiovascular health. Cold-pressed to preserve all its properties.',
                ingredients_es: 'Ingredientes: Aceite de semillas de ajonjolí (sésamo) 100% puro, prensado en frío.',
                ingredients_en: 'Ingredients: 100% pure cold-pressed sesame seed oil.',
                usage_es: 'Uso Sugerido: Consumir una cucharada al día. Puede usarse en ensaladas, aderezos o como suplemento directo. También apto para uso tópico en piel y cabello.',
                usage_en: 'Suggested Use: Consume one tablespoon daily. Can be used in salads, dressings, or as a direct supplement. Also suitable for topical use on skin and hair.',
                warnings_es: 'Advertencias: Mantener en un lugar fresco y oscuro. No superar la dosis recomendada. Consulte a un profesional de la salud si tiene alguna condición médica o está embarazada/lactando. Puede contener trazas de otros frutos secos.',
                warnings_en: 'Warnings: Store in a cool, dark place. Do not exceed recommended dose. Consult a healthcare professional if you have any medical condition or are pregnant/nursing. May contain traces of other nuts.',
                benefits_es: ["Rico en antioxidantes (sesamol y sesamolina)", "Promueve la salud ósea por su contenido de calcio y magnesio", "Apoya la salud cardiovascular", "Propiedades antiinflamatorias", "Hidratante natural para piel y cabello"],
                benefits_en: ["Rich in antioxidants (sesamol and sesamolin)", "Promotes bone health due to calcium and magnesium content", "Supports cardiovascular health", "Anti-inflammatory properties", "Natural moisturizer for skin and hair"],
                certifications: ['Orgánico', 'Prensado en Frío'],
                // Nuevas propiedades para detalles técnicos, reemplazando fichaTecnica_es/en
                origin_es: 'Semillas de ajonjolí (sésamo).',
                origin_en: 'Sesame seeds.',
                process_es: 'Prensado en frío para asegurar la máxima pureza y conservación de nutrientes.',
                process_en: 'Cold-pressed to ensure maximum purity and nutrient retention.',
                characteristics_es: 'Alto contenido de ácidos grasos insaturados (Omega-6), Vitamina E, calcio, magnesio y zinc. Sabor suave y aroma distintivo.',
                characteristics_en: 'High in Omega-6 and Omega-9 fatty acids, Vitamin E, calcium, magnesium, and zinc. Mild flavor and distinctive aroma.'
            },
            // --- EJEMPLO DE PRODUCTO: ACEITE DE BATANA ---
            {
                id: 'aceite-de-batana',
                name: 'Aceite De Batana',
                imageFile: 'batana.jpg',
                category: 'Cosmética natural y Cuidado Personal',
                brand: 'R&F Integrales',
                priceDetail: 1090.55,
                priceWholesale: 872.44,
                isOffer: true, // Asumido como oferta según tu screenshot
                dateAdded: '2025-05-20',
                salesCount: 300,
                description_es: 'El Aceite de Batana es un secreto natural para el cabello y la piel. Promueve el crecimiento capilar, fortalece los folículos y nutre profundamente, dejando un cabello brillante y saludable. También es excelente para hidratar y revitalizar la piel.',
                description_en: 'Batana Oil is a natural secret for hair and skin. It promotes hair growth, strengthens follicles, and deeply nourishes, leaving hair shiny and healthy. It is also excellent for moisturizing and revitalizing the skin.',
                ingredients_es: 'Ingredientes: Aceite puro de Batana.',
                ingredients_en: 'Ingredients: Pure Batana oil.',
                usage_es: 'Uso Sugerido: Para el cabello, aplicar de raíz a puntas, masajear y dejar actuar por al menos 30 minutos o toda la noche antes de lavar. Para la piel, aplicar una pequeña cantidad y masajear hasta absorber.',
                usage_en: 'Suggested Use: For hair, apply from roots to ends, massage, and leave on for at least 30 minutes or overnight before washing. For skin, apply a small amount and massage until absorbed.',
                warnings_es: 'Advertencias: Solo para uso externo. Evitar el contacto con los ojos. En caso de irritación, suspender su uso.',
                warnings_en: 'Warnings: For external use only. Avoid contact with eyes. In case of irritation, discontinue use.',
                benefits_es: ["Promueve el crecimiento del cabello", "Fortalece los folículos pilosos", "Aporta brillo y suavidad al cabello", "Hidrata profundamente la piel", "Ayuda a reducir la caída del cabello"],
                benefits_en: ["Promotes hair growth", "Strengthens hair follicles", "Adds shine and softness to hair", "Deeply moisturizes the skin", "Helps reduce hair loss"],
                certifications: ['Natural'],
                // Nuevas propiedades para detalles técnicos
                origin_es: 'Procede de la nuez del árbol American Oil Palm (Elaeis oleifera).',
                origin_en: 'Derived from the nut of the American Oil Palm tree (Elaeis oleifera).',
                process_es: 'Extraído de forma tradicional, rico en lípidos y antioxidantes.',
                process_en: 'Traditionally extracted, rich in lipids and antioxidants.',
                characteristics_es: 'Con alto contenido de ácidos grasos Omega-6 y Omega-9, tocotrienoles (Vitamina E) y carotenoides. Aspecto denso y aroma terroso.',
                characteristics_en: 'High in Omega-6 and Omega-9 fatty acids, tocotrienols (Vitamin E), and carotenoids. Dense appearance and earthy aroma.'
            },
            // --- EJEMPLO DE PRODUCTO: ACEITE DE COCO 8 OZ. ---
            {
                id: 'aceite-de-coco-8-oz',
                name: 'Aceite De Coco 8 Oz.',
                imageFile: 'cocopequeño.jpg', // Asegúrate de que este sea el nombre exacto de tu archivo
                category: 'Cosmética natural y Cuidado Personal',
                brand: 'R&F Integrales',
                priceDetail: 1869.56,
                priceWholesale: 1495.65,
                isOffer: false,
                dateAdded: '2025-06-10',
                salesCount: 180,
                description_es: 'El Aceite de Coco virgen orgánico de 8 oz. es un multiusos esencial para tu rutina diaria. Ideal para hidratación profunda de piel y cabello, desmaquillante natural y como suplemento para apoyar el metabolismo y la energía. Extraído en frío para conservar todas sus propiedades.',
                description_en: 'Organic Virgin Coconut Oil 8 oz. is an essential multi-purpose product for your daily routine. Ideal for deep skin and hair hydration, natural makeup remover, and as a supplement to support metabolism and energy. Cold-pressed to preserve all its properties.',
                ingredients_es: 'Ingredientes: Aceite de coco virgen orgánico 100%.',
                ingredients_en: 'Ingredients: 100% organic virgin coconut oil.',
                usage_es: 'Uso Sugerido: Para la piel y el cabello, aplicar directamente. Para consumo, iniciar con 1 cucharadita al día e incrementar gradualmente. Se puede usar en la cocina.',
                usage_en: 'Suggested Use: For skin and hair, apply directly. For consumption, start with 1 teaspoon daily and gradually increase. Can be used in cooking.',
                warnings_es: 'Advertencias: Almacenar en un lugar fresco, seco y oscuro. Puede solidificarse a bajas temperaturas, lo cual es normal. Calentar suavemente para licuar si es necesario.',
                warnings_en: 'Warnings: Store in a cool, dry, and dark place. May solidify at low temperatures, which is normal. Gently warm to liquefy if needed.',
                benefits_es: ["Hidratante natural para piel y cabello", "Antibacterial y antifúngico natural", "Fuente de energía rápida (MCTs)", "Apoya la salud digestiva", "Ayuda a la absorción de nutrientes"],
                benefits_en: ["Natural moisturizer for skin and hair", "Natural antibacterial and antifungal", "Quick energy source (MCTs)", "Supports digestive health", "Aids nutrient absorption"],
                certifications: ['Orgánico', 'Virgen'],
                // Nuevas propiedades para detalles técnicos
                origin_es: 'Coco fresco (Cocos nucifera).',
                origin_en: 'Fresh coconut (Cocos nucifera).',
                process_es: 'Prensado en frío sin refinar ni blanquear. Conserva su aroma y sabor natural a coco.',
                process_en: 'Cold-pressed, unrefined, and unbleached. Retains its natural coconut aroma and flavor.',
                characteristics_es: 'Rico en ácidos grasos de cadena media (MCTs), especialmente ácido láurico. Soluble en agua. Alto punto de humo para cocinar.',
                characteristics_en: 'Rich in medium-chain fatty acids (MCTs), especially lauric acid. Water-soluble. High smoke point for cooking.'
            },
            // --- NUEVOS PRODUCTOS: ACEITE DE COCO GALÓN Y MEDIO GALÓN ---
            {
                id: 'aceite-de-coco-galon',
                name: 'Aceite De Coco Galón',
                imageFile: 'coco-galon.jpg', // ¡Asegúrate de que esta imagen exista en tu carpeta 'images/'!
                category: 'Alimentación Saludable',
                brand: 'R&F Integrales',
                priceDetail: 2500.00,
                priceWholesale: 2200.00,
                isOffer: false,
                dateAdded: '2025-06-20',
                salesCount: 60,
                description_es: 'Aceite de coco virgen extra en formato de galón, ideal para uso culinario, cosmético y terapéutico. Fuente rica de triglicéridos de cadena media (MCTs) que proporcionan energía sostenida y apoyo metabólico. Su pureza y origen natural lo hacen perfecto para toda la familia.',
                description_en: 'Extra virgin coconut oil in gallon format, ideal for culinary, cosmetic, and therapeutic use. Rich source of medium-chain triglycerides (MCTs) that provide sustained energy and metabolic support. Its purity and natural origin make it perfect for the whole family.',
                ingredients_es: 'Ingredientes: Aceite de coco virgen 100% puro.',
                ingredients_en: 'Ingredients: 100% pure virgin coconut oil.',
                usage_es: 'Uso Sugerido: Para cocinar, freír o hornear. También aplicar directamente en piel y cabello para hidratación. Consumir 1-2 cucharadas diarias como suplemento alimenticio.',
                usage_en: 'Suggested Use: For cooking, frying, or baking. Also apply directly to skin and hair for hydration. Consume 1-2 tablespoons daily as a dietary supplement.',
                warnings_es: 'Advertencias: Mantener en un lugar fresco y oscuro. Puede solidificarse a bajas temperaturas. Consultar a un médico si tiene alguna condición de salud.',
                warnings_en: 'Warnings: Store in a cool, dark place. May solidify at low temperatures. Consult a doctor if you have any health condition.',
                benefits_es: ["Fuente de energía rápida", "Apoya la salud del cerebro y el corazón", "Hidratante natural", "Propiedades antimicrobianas", "Favorece la digestión"],
                benefits_en: ["Quick energy source", "Supports brain and heart health", "Natural moisturizer", "Antimicrobial properties", "Promotes digestion"],
                certifications: ['Orgánico', 'Prensado en Frío'],
                origin_es: 'Cocos nucifera cultivado orgánicamente.',
                origin_en: 'Organically grown Cocos nucifera.',
                process_es: 'Prensado en frío sin refinar ni blanquear para conservar todos sus nutrientes.',
                process_en: 'Cold-pressed without refining or bleaching to preserve all its nutrients.',
                characteristics_es: 'Rico en ácidos grasos de cadena media, especialmente ácido láurico y cáprico. Aroma y sabor suave a coco.',
                characteristics_en: 'Rich in medium-chain fatty acids, especially lauric and capric acid. Mild coconut aroma and flavor.'
            },
            {
                id: 'aceite-de-coco-medio-galon',
                name: 'Aceite De Coco Medio Galón',
                imageFile: 'coco-medio-galon.jpg', // ¡Asegúrate de que esta imagen exista en tu carpeta 'images/'!
                category: 'Alimentación Saludable',
                brand: 'R&F Integrales',
                priceDetail: 1400.00,
                priceWholesale: 1200.00,
                isOffer: false,
                dateAdded: '2025-06-21',
                salesCount: 80,
                description_es: 'Aceite de coco virgen extra en formato de medio galón, la cantidad perfecta para uso frecuente en la cocina o como parte de tu régimen de belleza. Mantiene todas las propiedades y beneficios del coco virgen orgánico, ideal para aquellos que buscan una opción saludable y versátil.',
                description_en: 'Extra virgin coconut oil in half-gallon format, the perfect amount for frequent use in cooking or as part of your beauty regimen. It maintains all the properties and benefits of organic virgin coconut, ideal for those seeking a healthy and versatile option.',
                ingredients_es: 'Ingredientes: Aceite de coco virgen 100% puro.',
                ingredients_en: 'Ingredients: 100% pure virgin coconut oil.',
                usage_es: 'Uso Sugerido: Excelente para saltear, hornear y aderezar. Úsalo también para nutrir tu piel y cabello con sus propiedades hidratantes.',
                usage_en: 'Suggested Use: Excellent for sautéing, baking, and dressing. Also use it to nourish your skin and hair with its moisturizing properties.',
                warnings_es: 'Advertencias: Guardar en un lugar fresco y seco, lejos de la luz directa. Se solidifica por debajo de 24°C. No es necesario refrigerar.',
                warnings_en: 'Warnings: Store in a cool, dry place, away from direct light. Solidifies below 24°C. Refrigeration is not necessary.',
                benefits_es: ["Promueve la salud cardiovascular", "Fortalece el sistema inmunológico", "Ayuda a la pérdida de peso", "Mejora la salud de la piel y el cabello", "Excelente para cocinar y hornear"],
                benefits_en: ["Promotes cardiovascular health", "Boosts the immune system", "Aids in weight loss", "Improves skin and hair health", "Excellent for cooking and baking"],
                certifications: ['Orgánico'],
                origin_es: 'Cocos nucifera de cultivo sostenible.',
                origin_en: 'Sustainably grown Cocos nucifera.',
                process_es: 'Extracción en frío para conservar el máximo de nutrientes y antioxidantes.',
                process_en: 'Cold extraction to preserve maximum nutrients and antioxidants.',
                characteristics_es: 'Aceite ligero con un sutil aroma a coco, ideal para consumo diario. Alto en MCTs y ácido láurico.',
                characteristics_en: 'Light oil with a subtle coconut aroma, ideal for daily consumption. High in MCTs and lauric acid.'
            },
            // --- PLANTILLA DE PRODUCTO (Copia y pega para añadir más productos) ---
            /*
            {
                id: 'id-unico-del-producto-en-kebab-case', // EJ: 'aceite-de-linaza', 'harina-de-almendras'
                name: 'Nombre Visible del Producto', // EJ: 'Aceite de Linaza', 'Harina de Almendras'
                imageFile: 'nombre-de-archivo.jpg', // EJ: 'linaza.jpg'. ¡Debe ser el nombre EXACTO en tu carpeta 'images/'!
                category: 'Nombre de Categoría', // EJ: 'Suplementos Naturales', 'Alimentación Saludable', 'Cosmética natural y Cuidado Personal', 'Dispositivos para la salud', 'Otros'
                brand: 'R&F Integrales', // Por defecto, o tu marca específica
                priceDetail: 0.00, // Precio de venta normal
                priceWholesale: 0.00, // Precio al por mayor (si es diferente, si no, pon el mismo que priceDetail)
                isOffer: false, // true si quieres que aparezca en la sección de ofertas
                dateAdded: '2025-06-01', // Para mostrar en "Nuevos Productos"
                salesCount: 100, // Para mostrar en "Más Vendidos" (número aleatorio o real)
                description_es: 'Descripción detallada en español de tu producto.',
                description_en: 'Detailed description in English for your product.',
                ingredients_es: 'Ingredientes: Lista de ingredientes en español.',
                ingredients_en: 'Ingredients: List of ingredients in English.',
                usage_es: 'Uso Sugerido: Indicaciones de uso en español.',
                usage_en: 'Suggested Use: Usage instructions in English.',
                warnings_es: 'Advertencias: Precauciones y contraindicaciones en español.',
                warnings_en: 'Warnings: Precauciones y contraindicaciones en inglés.',
                benefits_es: ['Beneficio 1 en español', 'Beneficio 2 en español'], // Lista de beneficios clave
                benefits_en: ['Benefit 1 in English', 'Benefit 2 in English'],
                certifications: ['Certificación 1', 'Certificación 2'], // Lista de certificaciones
                origin_es: '', // Asegurarse de que exista, incluso si está vacío
                origin_en: '',
                process_es: '',
                process_en: '',
                characteristics_es: '',
                characteristics_en: ''
            },
            */
            // --- Otros productos (Plantillas para que las llenes) ---
            // Asegúrate de que los IDs aquí coincidan con el productNames original para que no falte ninguno si no los borraste
            { id: 'aceite-de-linaza', name: 'Aceite De Linaza', imageFile: 'linaza.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 600, priceWholesale: 500, isOffer: false, dateAdded: '2025-06-05', salesCount: 120, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'aceite-de-oregano', name: 'Aceite De Oregano', imageFile: 'orégano.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 850, priceWholesale: 750, isOffer: true, dateAdded: '2025-06-02', salesCount: 200, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'aceite-de-ricino', name: 'Aceite De Ricino', imageFile: 'ricino.jpg', category: 'Cosmética natural y Cuidado Personal', brand: 'R&F Integrales', priceDetail: 400, priceWholesale: 350, isOffer: false, dateAdded: '2025-06-15', salesCount: 90, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'adipo-cf', name: 'Adipo-Cf', imageFile: 'adipo-cf.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1200, priceWholesale: 1000, isOffer: false, dateAdded: '2025-06-08', salesCount: 160, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'adipofin', name: 'Adipofin', imageFile: 'Adipofina.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1300, priceWholesale: 1100, isOffer: true, dateAdded: '2025-05-25', salesCount: 280, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'alcachofa', name: 'Alcachofa', imageFile: 'alcachofa.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 750, priceWholesale: 650, isOffer: false, dateAdded: '2025-06-12', salesCount: 110, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'almendras', name: 'Almendras', imageFile: 'almendras.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 500, priceWholesale: 450, isOffer: false, dateAdded: '2025-06-03', salesCount: 220, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'amargo-sueco', name: 'Amargo Sueco', imageFile: 'amargo sueco.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 900, priceWholesale: 800, isOffer: true, dateAdded: '2025-05-18', salesCount: 190, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ashwagandha', name: 'Ashwagandha', imageFile: 'ashwagandha.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1100, priceWholesale: 950, isOffer: false, dateAdded: '2025-06-07', salesCount: 140, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ayurcolon', name: 'Ayurcolon', imageFile: 'ayurcolon.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1050, priceWholesale: 900, isOffer: false, dateAdded: '2025-06-09', salesCount: 130, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ayurmona', name: 'Ayurmona', imageFile: 'ayurmona.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1150, priceWholesale: 980, isOffer: false, dateAdded: '2025-06-11', salesCount: 105, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'barro-arcilla', name: 'Barro (Arcilla)', imageFile: 'arcilla.jpg', category: 'Cosmética natural y Cuidado Personal', brand: 'R&F Integrales', priceDetail: 350, priceWholesale: 300, isOffer: false, dateAdded: '2025-06-18', salesCount: 80, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'broncovedi-jarabe', name: 'Broncovedi Jarabe', imageFile: 'bronvcovedi.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 700, priceWholesale: 600, isOffer: false, dateAdded: '2025-06-13', salesCount: 170, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'cardo-mariano', name: 'Cardo Mariano', imageFile: 'cardomariano.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 950, priceWholesale: 820, isOffer: false, dateAdded: '2025-06-04', salesCount: 165, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'chanca-piedra', name: 'Chanca Piedra', imageFile: 'piedra.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 800, priceWholesale: 700, isOffer: false, dateAdded: '2025-06-16', salesCount: 100, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'citrato-de-potasio-polvo', name: 'Citrato De Potasio Polvo', imageFile: 'Polvo de potasio.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1400, priceWholesale: 1200, isOffer: false, dateAdded: '2025-06-19', salesCount: 95, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'citrato-magnesio', name: 'Citrato Magnesio', imageFile: 'citratomagnesio.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 900, priceWholesale: 780, isOffer: false, dateAdded: '2025-06-06', salesCount: 210, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'cola-de-caballo', name: 'Cola De Caballo', imageFile: 'colacaballo.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 550, priceWholesale: 480, isOffer: false, dateAdded: '2025-06-20', salesCount: 75, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'crema-relabir-antiestres', name: 'Crema Relabir Antiestres', imageFile: 'relabir.jpg', category: 'Cosmética natural y Cuidado Personal', brand: 'R&F Integrales', priceDetail: 780, priceWholesale: 680, isOffer: false, dateAdded: '2025-06-21', salesCount: 115, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'curcuma-en-polvo', name: 'Curcuma En Polvo', imageFile: 'cúrcuma en polvo.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 650, priceWholesale: 550, isOffer: false, dateAdded: '2025-06-22', salesCount: 135, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'curcumin', name: 'Curcumin', imageFile: 'curcumina.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1500, priceWholesale: 1300, isOffer: true, dateAdded: '2025-05-28', salesCount: 270, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'damiana', name: 'Damiana', imageFile: 'damiana.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 720, priceWholesale: 620, isOffer: false, dateAdded: '2025-06-23', salesCount: 85, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'diabenol', name: 'Diabenol', imageFile: 'diabenol.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1600, priceWholesale: 1400, isOffer: false, dateAdded: '2025-06-24', salesCount: 98, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'dianin', name: 'Dianin', imageFile: 'dianin.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1700, priceWholesale: 1500, isOffer: false, dateAdded: '2025-06-25', salesCount: 90, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'diente-de-leon', name: 'Diente De Leon', imageFile: 'dienteleon.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 600, priceWholesale: 520, isOffer: false, dateAdded: '2025-06-26', salesCount: 110, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'fennel', name: 'Fennel', imageFile: 'hinojo.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 580, priceWholesale: 500, isOffer: false, dateAdded: '2025-06-27', salesCount: 80, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'fenugreek-capsula', name: 'Fenugreek Capsula', imageFile: 'cápsula de fenogreco.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 920, priceWholesale: 800, isOffer: false, dateAdded: '2025-06-28', salesCount: 105, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'fenugreek-polvo', name: 'Fenugreek Polvo', imageFile: 'polvo de fenogreco.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 700, priceWholesale: 600, isOffer: false, dateAdded: '2025-06-29', salesCount: 90, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'flor-de-jamaica', name: 'Flor De Jamaica', imageFile: 'jamaica.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 450, priceWholesale: 380, isOffer: false, dateAdded: '2025-06-30', salesCount: 180, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'flor-de-lavanda', name: 'Flor De Lavanda', imageFile: 'LAVANDA.jpg', category: 'Cosmética natural y Cuidado Personal', brand: 'R&F Integrales', priceDetail: 600, priceWholesale: 520, isOffer: false, dateAdded: '2025-07-01', salesCount: 70, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ganoderma', name: 'Ganoderma', imageFile: 'ganoderma.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1800, priceWholesale: 1600, isOffer: false, dateAdded: '2025-07-02', salesCount: 145, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'generador-desinfectante', name: 'Generador Desinfectante', imageFile: 'generador.jpg', category: 'Dispositivos para la salud', brand: 'R&F Integrales', priceDetail: 2500, priceWholesale: 2200, isOffer: false, dateAdded: '2025-07-03', salesCount: 50, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ginkgo-biloba', name: 'Ginkgo Biloba', imageFile: 'ginkgobiloba.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1000, priceWholesale: 880, isOffer: false, dateAdded: '2025-07-04', salesCount: 190, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ginseng', name: 'Ginseng', imageFile: 'Ginseng.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1500, priceWholesale: 1300, isOffer: true, dateAdded: '2025-05-15', salesCount: 320, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'harina-de-almendras', name: 'Harina De Almendras', imageFile: 'harinaalmendras.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 700, priceWholesale: 600, isOffer: false, dateAdded: '2025-07-05', salesCount: 175, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'hojas-zapote-blanco', name: 'Hojas Zapote Blanco', imageFile: 'zapoteblanco.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 400, priceWholesale: 350, isOffer: false, dateAdded: '2025-07-06', salesCount: 65, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'ionteracare', name: 'Ionteracare', imageFile: 'ionteracare.jpg', category: 'Dispositivos para la salud', brand: 'R&F Integrales', priceDetail: 3000, priceWholesale: 2800, isOffer: false, dateAdded: '2025-07-07', salesCount: 30, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'jenjibre', name: 'Jenjibre', imageFile: 'jenjibre.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 300, priceWholesale: 250, isOffer: false, dateAdded: '2025-07-08', salesCount: 200, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'kelp', name: 'Kelp', imageFile: 'algas marinas.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 800, priceWholesale: 700, isOffer: false, dateAdded: '2025-07-09', salesCount: 90, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'levadura-nutricional', name: 'Levadura Nutricional', imageFile: 'levaduranutricional.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 500, priceWholesale: 450, isOffer: false, dateAdded: '2025-07-10', salesCount: 150, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'licorice', name: 'Licorice', imageFile: 'regaliz.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 750, priceWholesale: 650, isOffer: false, dateAdded: '2025-07-11', salesCount: 100, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'maca-en-capsula', name: 'Maca En Capsula', imageFile: 'macacapsula.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1200, priceWholesale: 1000, isOffer: false, dateAdded: '2025-07-12', salesCount: 180, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'maca-en-polvo', name: 'Maca En Polvo', imageFile: 'macapolvo.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 900, priceWholesale: 780, isOffer: false, dateAdded: '2025-07-13', salesCount: 220, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'miel-en-panal', name: 'Miel En Panal', imageFile: 'mielpanal.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 1100, priceWholesale: 950, isOffer: false, dateAdded: '2025-07-14', salesCount: 190, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'moringa-en-polvo', name: 'Moringa En Polvo', imageFile: 'moringapolvo.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 600, priceWholesale: 500, isOffer: false, dateAdded: '2025-07-15', salesCount: 160, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'palo-de-arco', name: 'Palo De Arco', imageFile: 'paloarco.jpg', category: 'Otros', brand: 'R&F Integrales', priceDetail: 450, priceWholesale: 380, isOffer: false, dateAdded: '2025-07-16', salesCount: 85, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'parasito-jarabe', name: 'Parasito Jarabe', imageFile: 'parásito.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 800, priceWholesale: 700, isOffer: false, dateAdded: '2025-07-17', salesCount: 100, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'progesterona', name: 'Progesterona', imageFile: 'progesterona.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1900, priceWholesale: 1700, isOffer: false, dateAdded: '2025-07-18', salesCount: 60, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'propoleo-tintura', name: 'Propoleo Tintura', imageFile: 'propóleo.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 700, priceWholesale: 600, isOffer: false, dateAdded: '2025-07-19', salesCount: 130, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'prostazan', name: 'Prostazan', imageFile: 'prostazan.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1400, priceWholesale: 1200, isOffer: false, dateAdded: '2025-07-20', salesCount: 80, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'quercetin-y-bromelain', name: 'Quercetin Y Bromelain', imageFile: 'quercetinabromelaina.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1600, priceWholesale: 1400, isOffer: false, dateAdded: '2025-07-21', salesCount: 95, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'sangre-de-drago', name: 'Sangre De Drago', imageFile: 'sangre drago.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 850, priceWholesale: 750, isOffer: false, dateAdded: '2025-07-22', salesCount: 110, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'te-matcha', name: 'Te Matcha', imageFile: 'matchat.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 1200, priceWholesale: 1000, isOffer: false, dateAdded: '2025-07-23', salesCount: 210, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'triple-magnesio-complex', name: 'Triple Magnesio Complex', imageFile: 'triplemagnesio.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1300, priceWholesale: 1100, isOffer: false, dateAdded: '2025-07-24', salesCount: 150, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'valeriana-y-pasiflora', name: 'Valeriana Y Pasiflora', imageFile: 'valerianaypasiflora.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 900, priceWholesale: 780, isOffer: false, dateAdded: '2025-07-25', salesCount: 120, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'xanthin', name: 'Xanthin', imageFile: 'xantina.jpg', category: 'Suplementos Naturales', brand: 'R&F Integrales', priceDetail: 1800, priceWholesale: 1600, isOffer: false, dateAdded: '2025-07-26', salesCount: 70, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'zeolita', name: 'Zeolita', imageFile: 'zeolita.jpg', category: 'Otros', brand: 'R&F Integrales', priceDetail: 950, priceWholesale: 850, isOffer: false, dateAdded: '2025-07-27', salesCount: 105, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'te-de-manzanilla-organico', name: 'Te De Manzanilla Organico', imageFile: 'te de manzanilla organico.jpg', category: 'Alimentación Saludable', brand: 'R&F Integrales', priceDetail: 400, priceWholesale: 350, isOffer: false, dateAdded: '2025-07-28', salesCount: 140, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'serum-facial-con-vitamina-c', name: 'Serum Facial Con Vitamina C', imageFile: 'serum facial con vitamina c.jpg', category: 'Cosmética natural y Cuidado Personal', brand: 'R&F Integrales', priceDetail: 1500, priceWholesale: 1300, isOffer: false, dateAdded: '2025-07-29', salesCount: 110, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
            { id: 'mascarilla-capilar-de-argan', name: 'Mascarilla Capilar De Argan', imageFile: 'mascarilla capilar de argan.jpg', category: 'Cosmética natural y Cuidado Personal', brand: 'R&F Integrales', priceDetail: 800, priceWholesale: 700, isOffer: false, dateAdded: '2025-07-30', salesCount: 95, description_es: 'En desarrollo.', description_en: 'Under development.', ingredients_es: 'En desarrollo.', ingredients_en: 'Under development.', usage_es: 'En desarrollo.', usage_en: 'Under development.', warnings_es: 'En desarrollo.', warnings_en: 'Under development.', benefits_es: ['En construcción.'], benefits_en: ['Under construction.'], certifications: ['En construcción'], origin_es: 'En construcción.', origin_en: 'Under construction.', process_es: 'En construcción.', process_en: 'Under construction.', characteristics_es: 'En construcción.', characteristics_en: 'Under construction.' },
        ];

        // Se genera el arreglo 'products' a partir de ALL_PRODUCTS_DATA,
        // añadiendo propiedades derivadas como 'image' y 'normalizedCategory'.
        // ESTE ARREGLO 'products' ES EL QUE SE UTILIZA EN TODO EL CÓDIGO
        // PARA MOSTRAR LOS PRODUCTOS EN LA TIENDA, DETALLES, ETC.
        const products = ALL_PRODUCTS_DATA.map(product => ({
            ...product, // Copia todas las propiedades del producto original
            // Añade la ruta completa de la imagen
            image: IMAGE_BASE_PATH + product.imageFile,
            // Añade la categoría normalizada para filtros
            normalizedCategory: toKebabCase(product.category),
            // Asegura que priceWholesale esté presente y sea un número, si no, usa priceDetail
            priceWholesale: product.priceWholesale !== undefined ? parseFloat(product.priceWholesale) : parseFloat(product.priceDetail)
        }));


        const combos = [
            {
                id: 'combo-bienestar-total',
                name: 'Combo Bienestar Total',
                image: IMAGE_BASE_PATH + 'combo-bienestar.jpg', // Usando IMAGE_BASE_PATH
                description_es: 'Este combo está diseñado para brindarte un bienestar integral, combinando productos que te ayudarán a mantener la energía y la calma en tu día a día.',
                description_en: 'This combo is designed to provide you with complete wellness, combining products that will help you maintain energy and calm in your daily life.',
                price: 1500.00,
                originalPrice: 2000.00,
                productsIncluded: [
                    { id: 'maca-en-polvo', quantity: 1, benefits_es: ["Aumenta la energía y vitalidad", "Mejora el estado de ánimo"], benefits_en: ["Increases energy and vitality", "Improves mood"] },
                    { id: 'aceite-de-coco-8-oz', quantity: 1, benefits_es: ["Hidratación profunda para piel y cabello", "Soporte metabólico"], benefits_en: ["Deep hydration for skin and hair", "Metabolic support"] },
                    { id: 'te-de-manzanilla-organico', quantity: 1, benefits_es: ["Promueve la relajación y el sueño", "Alivia el estrés"], benefits_en: ["Promotes relaxation and sleep", "Relieves stress"] }
                ]
            },
            {
                id: 'combo-belleza-natural',
                name: 'Combo Belleza Natural',
                image: IMAGE_BASE_PATH + 'combo-belleza.jpg', // Usando IMAGE_BASE_PATH
                description_es: 'Logra una piel radiante y un cabello saludable con este combo esencial, formulado con ingredientes naturales para realzar tu belleza.',
                description_en: 'Achieve radiant skin and healthy hair with this essential combo, formulated with natural ingredients to enhance your beauty.',
                price: 2200.00,
                originalPrice: 2800.00,
                productsIncluded: [
                    { id: 'serum-facial-con-vitamina-c', quantity: 1, benefits_es: ["Ilumina y unifica el tono de la piel", "Reduce líneas finas"], benefits_en: ["Brightens and and evens skin tone", "Reduces fine lines"] },
                    { id: 'mascarilla-capilar-de-argan', quantity: 1, benefits_es: ["Nutre e hidrata el cabello", "Aporta brillo y suavidad"], benefits_en: ["Nourishes and hydrates hair", "Adds shine and softness"] }
                ]
            }
        ];

        const carouselImages = [
            {
                src: IMAGE_BASE_PATH + 'carousel-bienvenida.jpg', // Usando IMAGE_BASE_PATH
                alt_es: 'Bienvenido a R&F Productos Integrales',
                alt_en: 'Welcome to R&F Integral Products',
                title_es: 'Descubre el Poder de lo Natural',
                title_en: 'Discover the Power of Natural',
                subtitle_es: 'Productos de alta calidad para tu bienestar y el de tu familia.',
                subtitle_en: 'High-quality products for your well-being and your family.',
                buttonText_es: 'Ver Tienda',
                buttonText_en: 'View Shop',
                buttonLink: '#shop'
            },
            {
                src: 'https://placehold.co/1200x450/B8D8D8/000000?text=R%26F+Productos+Integrales', // Esta es una URL externa, no necesita IMAGE_BASE_PATH
                alt_es: 'R&F Productos Integrales - Tu fuente de bienestar natural',
                alt_en: 'R&F Productos Integrales - Your source for natural wellness',
                title_es: '',
                title_en: '',
                subtitle_es: '',
                subtitle_en: '',
                buttonText_es: '',
                buttonText_en: '',
                buttonLink: ''
            },
            {
                src: IMAGE_BASE_PATH + 'carousel-ofertas.jpg', // Usando IMAGE_BASE_PATH
                alt_es: 'Ofertas Exclusivas',
                alt_en: 'Exclusive Offers',
                title_es: 'Ofertas Imperdibles',
                title_en: 'Unmissable Offers',
                subtitle_es: 'Aprovecha nuestros descuentos especiales por tiempo limitado.',
                subtitle_en: 'Take advantage of our special limited-time discounts.',
                buttonText_es: 'Ver Ofertas',
                buttonText_en: 'View Offers',
                buttonLink: '#offers'
            }
        ];

        const translations = {
            es: {
                promoBanner: "Envío GRATIS por el consumo mínimo de RD$2,000 | Entrega en 24/48 horas | Confianza y pago seguro",
                searchPlaceholder: "Buscar productos...",
                spanish: "Español", english: "English", phone: "Teléfono",
                home: "Inicio", shop: "Tienda", offers: "Ofertas", newProducts: "Nuevos Productos", bestSellers: "Más Vendidos",
                filterBy: "Filtrar por", brand: "Marca", productType: "Tipo de Producto", skinHairType: "Tipo de Piel / Cabello",
                healthBenefit: "Beneficio / Condición de Salud", certifications: "Certificaciones", price: "Precio", availability: "Disponibilidad",
                inStock: "En stock", outOfStock: "No disponible", sortBy: "Ordenar por", relevance: "Relevancia",
                priceAsc: "Precio (Ascendente)", priceDesc: "Precio (Descendente)", mostSold: "Más vendidos", newest: "Novedades",
                customerRating: "Calificación de clientes", addToCart: "Añadir al Carrito", all: "Todos", applyFilters: "Aplicar Filtros",
                description: "Descripción Detallada", ingredients: "Lista Completa de Ingredientes", usage: "Modo de Uso / Dosis Recomendada",
                warnings: "Advertencias / Contraindicaciones", reviews: "Opiniones y Calificaciones", relatedProducts: "Productos Relacionados",
                yourCart: "Tu Carrito de Compras", item: "Artículo", quantity: "Cantidad", subtotal: "Subtotal:", discount: "Descuento:", shippingCost: "Envío:", total: "Total a pagar:",
                checkout: "Realizar Pedido", continueShopping: "Continuar Comprando", cartEmpty: "Tu carrito está vacío.", removeItem: "Eliminar",
                productAdded: "Producto Añadido al Carrito", addedSuccessfully: "¡El producto ha sido añadido exitosamente a tu carrito de compras!", close: "Cerrar",
                addedToWishlist: "Producto Añadido a Lista de Deseos", 
                removedFromWishlist: "Producto Eliminado de Lista de Deseos", 
                wishlistPageTitle: "Tu Lista de Deseos", 
                noProductsInWishlist: "No hay productos en tu lista de deseos.", 
                wishlist: "Lista de Deseos", // Esta clave es específicamente para el texto del enlace del encabezado
                addToWishlist: "Añadir a Lista de Deseos", // Traducción para el texto del botón

                aboutUsText: "R&F Productos Integrales es tu tienda online de confianza para productos naturales en la República Dominicana. Nos dedicamos a ofrecerte lo mejor para tu bienestar.",
                infoTitle: "Información", contact: "Contacto", helpFAQ: "Ayuda y FAQ", blog: "Blog", privacyPolicy: "Política de Privacidad", termsOfUse: "Términos de Uso",
                customerServiceTitle: "Atención al Cliente", shippingPolicy: "Política de Envíos", returnPolicy: "Política de Devoluciones", paymentMethods: "Métodos de Pago", hours: "Horarios: L-V 9am-5pm",
                followUs: "Síguenos", newsletter: "Newsletter", yourEmail: "Tu correo electrónico", subscribe: "Suscribir",
                copyright: "&copy; 2025 R&F Productos Integrales. Todos los derechos reservados.",
                disclaimer: "Descargo de Responsabilidad: La información en este sitio no reemplaza el consejo médico. Los productos no están destinados a diagnosticar, tratar, curar o prevenir enfermedades. Consultar a un médico para dosis y frecuencia.",
                contactDetails: "Tus Datos de Contacto",
                fullName: "Nombre Completo",
                yourNamePlaceholder: "Tu Nombre",
                deliveryAddress: "Dirección de Entrega",
                yourAddressPlaceholder: "Calle, número, sector, ciudad",
                yourPhoneNumber: "Tu Teléfono (WhatsApp)",
                yourPhonePlaceholder: "Ej: 8091234567",
                requiredFields: "Campos Requeridos",
                completeYourDetails: "Por favor, completa todos tus datos de contacto (Nombre, Dirección, Teléfono) y selecciona el Método de Entrega y Pago para poder procesar tu pedido.",
                orderSent: "Pedido Enviado",
                orderSentMessage: "Tu pedido ha sido enviado por WhatsApp. ¡Nos pondremos en contacto contigo pronto!",
                deliveryMethod: "Método de Entrega",
                homeDelivery: "A Domicilio",
                storePickup: "Recoger en Tienda",
                deliveryCostNoteSantoDomingo: "Si el envío es en el Gran Santo Domingo o DN., el costo será de RD$300.00",
                deliveryCostNoteOutside: "Si el envío es fuera de esta área demográfica (otras partes del país), el costo será de RD$600.00",
                paymentMethod: "Método de Pago",
                cash: "Efectivo",
                bankTransfer: "Transferencia Bancaria",
                selectDelivery: "Selecciona un método de entrega",
                selectPayment: "Selecciona un método de pago",
                bankAccounts: "Cuentas Bancarias para Transferencia",
                bankPopular: "Banco Popular: 764444055 (Cuenta de ahorro - Troadia Cepeda)",
                banreservas: "Banreservas: 0230009255 (Cuenta Corriente - Fausto Paulino Cepada)",
                bhd: "BHD: 1122334455 (Cuenta de ahorro - Fausto Paulino Cepada)",
                paymentConfirmationNote: "Para pagos vía transferencia, haga el pago cuando su pedido ha sido confirmado por uno de nuestros representantes.",
                discountNote: "La aplicación de algún descuento especial, si el caso lo amerita, será realizado por el representante, una vez reciba la notificación del pedido, y se lo comunicará al cliente inmediatamente revise la solicitud del pedido y antes de proceder con el pago.",
                aboutUsPageTitle: "Nuestra Historia en R&F Productos Integrales",
                aboutUsPageContent: "En R&F Productos Integrales, nuestra pasión es tu bienestar. Fundada en 2025, nos dedicamos a seleccionar y ofrecer los más puros y efectivos productos naturales de la República Dominicana. Creemos firmemente en el poder de la naturaleza para nutrir el cuerpo y la mente, y nuestro compromiso es brindarte opciones saludables y sostenibles. Cada producto en nuestra tienda ha sido cuidadosamente elegido, garantizando calidad, origen y eficacia. Únete a nuestra comunidad y descubre un mundo de bienestar natural.",
                noProductsFound: "No se encontraron productos con los filtros seleccionados.",
                comboOffers: "Nuestros Combos en Oferta",
                individualOffers: "Ofertas Individuales",
                productsInCombo: "Productos en este Combo",
                benefits: "Beneficios",
                "suplementos-naturales": "Suplementos Naturales",
                "alimentacion-saludable": "Alimentación Saludable",
                "cosmetica-natural-y-cuidado-personal": "Cosmética Natural y Cuidado Personal",
                "dispositivos-para-la-salud": "Dispositivos para la Salud",
                "otros": "Otros",
                reviewsDisclaimer: "Esta sección de opiniones es para demostración. Para habilitar opiniones y calificaciones de usuarios en tiempo real con almacenamiento y moderación, se necesitaría un sistema de backend (servidor y base de datos) y posiblemente integración con una plataforma de reseñas de terceros (ej. Trustpilot, Google Reviews).",
                keyDetails: "Detalles Clave del Producto",
                origin: "Origen",
                process: "Proceso",
                characteristics: "Características",
                contactPageContent: "Puedes contactarnos a través de WhatsApp al 809-425-4540 o enviarnos un correo electrónico a info@ryfintegrales.com. Nuestro equipo está disponible para ayudarte de lunes a viernes, de 9:00 AM a 5:00 PM.",
                helpFAQPageContent: "Encuentra respuestas a las preguntas más frecuentes sobre nuestros productos, envíos, pagos y más. Si no encuentras lo que buscas, no dudes en contactarnos directamente.",
                blogPageContent: "Visita nuestro blog para conocer las últimas novedades en bienestar natural, consejos de salud, guías de uso de productos y recetas saludables. Mantente informado sobre cómo mejorar tu calidad de vida de forma natural.",
                privacyPolicyPageContent: "Nuestra política de privacidad detalla cómo R&F Productos Integrales recopila, usa y protege tu información personal. Nos comprometemos a salvaguardar tus datos y respetar tu privacidad en todo momento.",
                termsOfUsePageContent: "Lee nuestros términos y condiciones de uso. Estos rigen tu acceso y uso de nuestro sitio web, incluyendo la compra de productos y servicios. Al utilizar nuestro sitio, aceptas estos términos.",
                shippingPolicyPageContent: "Nuestra política de envíos explica los plazos de entrega, costos y áreas de cobertura. Ofrecemos envío gratuito por un consumo mínimo y entregas rápidas en la República Dominicana.",
                returnPolicyPageContent: "Consulta nuestra política de devoluciones para conocer los procedimientos y condiciones para devolver o cambiar productos. Tu satisfacción es nuestra prioridad y buscamos soluciones justas y rápidas.",
                paymentMethodsPageContent: "Aceptamos pagos en efectivo y transferencias bancarias. Próximamente, ampliaremos nuestras opciones de pago para tu mayor comodidad. Todos los pagos son seguros y transparentes."
            },
            en: {
                promoBanner: "FREE shipping for minimum consumption of RD$2,000 | Delivery in 24/48 hours | Trust and secure payment",
                searchPlaceholder: "Search products...",
                spanish: "Spanish", english: "English", phone: "Phone",
                home: "Home", shop: "Shop", offers: "Offers", newProducts: "New Products", bestSellers: "Best Sellers",
                filterBy: "Filter by", brand: "Brand", productType: "Product Type", skinHairType: "Skin / Hair Type",
                healthBenefit: "Health Benefit / Condition", certifications: "Certifications", price: "Price", availability: "Availability",
                inStock: "In stock", outOfStock: "Out of stock", sortBy: "Sort by", relevance: "Relevance",
                priceAsc: "Price (Ascending)", priceDesc: "Price (Descending)", mostSold: "Most Sold", newest: "Newest",
                customerRating: "Customer Rating", addToCart: "Add to Cart", all: "All", applyFilters: "Apply Filters",
                description: "Detailed Description", ingredients: "Full List of Ingredients", usage: "How to Use / Recommended Dose",
                warnings: "Warnings / Contraindications", reviews: "Reviews and Ratings", relatedProducts: "Related Products",
                yourCart: "Your Shopping Cart", item: "Item", quantity: "Quantity", subtotal: "Subtotal:", discount: "Discount:", shippingCost: "Shipping:", total: "Total to pay:",
                checkout: "Checkout", continueShopping: "Continue Shopping", cartEmpty: "Your cart is empty.", removeItem: "Remove",
                productAdded: "Product Added to Cart", 
                addedSuccessfully: "The product has been successfully added to your shopping cart!", 
                close: "Close",
                addedToWishlist: "Product Added to Wishlist", 
                removedFromWishlist: "Product Removed from Wishlist", 
                wishlistPageTitle: "Your Wishlist", 
                noProductsInWishlist: "No products in your wishlist.", 
                wishlist: "Wishlist", 
                addToWishlist: "Add to Wishlist", 

                aboutUsText: "R&F Productos Integrales is your trusted online store for natural products in the Dominican Republic. We are dedicated to offering you the best for your well-being.",
                infoTitle: "Information", contact: "Contact", helpFAQ: "Help & FAQ", blog: "Blog", privacyPolicy: "Privacy Policy", termsOfUse: "Terms of Use",
                customerServiceTitle: "Customer Service", shippingPolicy: "Shipping Policy", returnPolicy: "Return Policy", paymentMethods: "Payment Methods", hours: "M-F 9am-5pm",
                followUs: "Follow Us", newsletter: "Newsletter", yourEmail: "Your email", subscribe: "Subscribe",
                copyright: "&copy; 2025 R&F Productos Integrales. All rights reserved.",
                disclaimer: "Disclaimer: The information on this site does not replace medical advice. Products are not intended to diagnose, treat, cure, or prevent diseases. Consult a doctor for dosage and frequency.",
                contactDetails: "Your Contact Details",
                fullName: "Full Name",
                yourNamePlaceholder: "Your Name",
                deliveryAddress: "Delivery Address",
                yourAddressPlaceholder: "Street, number, sector, city",
                yourPhoneNumber: "Your Phone Number (WhatsApp)",
                yourPhonePlaceholder: "Ex: 8091234567",
                requiredFields: "Required Fields",
                completeYourDetails: "Please complete all your contact details (Name, Address, Phone) and select the Delivery and Payment Method to process your order.",
                orderSent: "Order Sent",
                orderSentMessage: "Your order has been sent via WhatsApp. We will contact you soon!",
                deliveryMethod: "Home Delivery",
                homeDelivery: "Home Delivery",
                storePickup: "Store Pickup",
                deliveryCostNoteSantoDomingo: "If shipping is within Greater Santo Domingo or DN, the cost will be RD$300.00",
                deliveryCostNoteOutside: "If shipping is outside this demographic area (other parts of the country), the cost will be RD$600.00",
                paymentMethod: "Payment Method",
                cash: "Cash",
                bankTransfer: "Bank Transfer",
                selectDelivery: "Select a delivery method",
                selectPayment: "Select a payment method",
                bankAccounts: "Bank Accounts for Transfer",
                bankPopular: "Banco Popular: 764444055 (Savings Account - Troadia Cepeda)",
                banreservas: "Banreservas: 0230009255 (Checking Account - Fausto Paulino Cepada)",
                bhd: "BHD: 1122334455 (Savings Account - Fausto Paulino Cepada)",
                paymentConfirmationNote: "For bank transfer payments, please make the payment once your order has been confirmed by one of our representatives.",
                discountNote: "Any special discount, if applicable, will be applied by the representative once they receive the order notification, and they will communicate it to the client immediately after reviewing the order request and before proceeding with the payment.",
                aboutUsPageTitle: "Our Story at R&F Integral Products",
                aboutUsPageContent: "At R&F Integral Products, our passion is your well-being. Founded in 2025, we are dedicated to selecting and offering the purest and most effective natural products in the Dominican Republic. We firmly believe in the power of nature to nourish the body and mind, and our commitment is to provide you with healthy and sustainable options. Every product in our store has been carefully chosen, ensuring quality, origin, and effectiveness. Join our community and discover a world of natural well-being.",
                noProductsFound: "No products found with the selected filters.",
                comboOffers: "Our Combo Offers",
                individualOffers: "Individual Offers",
                productsInCombo: "Products in this Combo",
                benefits: "Benefits",
                "suplementos-naturales": "Natural Supplements",
                "alimentacion-saludable": "Healthy Food",
                "cosmetica-natural-y-cuidado-personal": "Natural Cosmetics and Personal Care",
                "dispositivos-para-la-salud": "Health Devices",
                "otros": "Others",
                reviewsDisclaimer: "This review section is for demonstration purposes. To enable real-time user reviews and ratings with storage and moderation, a backend system (server and database) and possibly integration with a third-party review platform (e.g., Trustpilot, Google Reviews) would be required.",
                keyDetails: "Key Product Details",
                origin: "Origin",
                process: "Process",
                characteristics: "Characteristics",
                contactPageContent: "You can contact us via WhatsApp at 809-425-4540 or send us an email at info@ryfintegrales.com. Our team is available to assist you Monday through Friday, from 9:00 AM to 5:00 PM.",
                helpFAQPageContent: "Find answers to frequently asked questions about our products, shipping, payments, and more. If you can't find what you're looking for, feel free to contact us directly.",
                blogPageContent: "Visit our blog for the latest news in natural wellness, health tips, product usage guides, and healthy recipes. Stay informed on how to improve your quality of life naturally.",
                privacyPolicyPageContent: "Our privacy policy details how R&F Integral Products collects, uses, and protects your personal information. We are committed to safeguarding your data and respecting your privacy at all times.",
                termsOfUsePageContent: "Read our terms and conditions of use. These govern your access and use of our website, including the purchase of products and services. By using our site, you agree to these terms.",
                shippingPolicyPageContent: "Our shipping policy explains delivery times, costs, and coverage areas. We offer free shipping for a minimum purchase and fast deliveries in the Dominican Republic.",
                returnPolicyPageContent: "Consult our return policy for procedures and conditions for returning or exchanging products. Your satisfaction is our priority, and we seek fair and quick solutions.",
                paymentMethodsPageContent: "We accept cash and bank transfer payments. We will soon expand our payment options for your convenience. All payments are secure and transparent."
            }
        };

        // --- Variables de Estado Global (inicializadas) ---
        let currentLanguage = 'es';
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        let currentPage = window.location.hash.substring(1).split('-')[0] || 'home';
        let slideIndex = 0;
        let carouselInterval;

        // --- Referencias de Elementos DOM ---
        // Estas referencias se acceden después de DOMContentLoaded.
        const appContent = document.getElementById('app-content');
        const cartCountElement = document.getElementById('cart-count');
        const wishlistCountElement = document.getElementById('wishlist-count');
        const cartModal = document.getElementById('cart-modal');
        const wishlistModal = document.getElementById('wishlist-modal');
        const searchInput = document.getElementById('search-input');
        const fichaTecnicaModal = document.getElementById('fichaTecnicaModal');

        // --- Funciones de Ayuda Centrales (dependen de datos/estado/DOM globales) ---
        // Formatea un precio a la moneda local
        function formatPrice(price) { return `RD$${(price || 0).toFixed(2)}`; }

        // Actualiza el contador de artículos en el carrito
        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (cartCountElement) cartCountElement.textContent = totalItems;
        }

        // Actualiza el contador de artículos en la lista de deseos
        function updateWishlistCount() {
            if (wishlistCountElement) wishlistCountElement.textContent = wishlist.length;
        }

        // Muestra un modal de confirmación (para carrito o newsletter)
        function showModal(title, message) {
            if (document.getElementById('modal-title')) document.getElementById('modal-title').textContent = title;
            if (document.getElementById('modal-message')) document.getElementById('modal-message').textContent = message;
            if (cartModal) cartModal.classList.remove('hidden');
        }

        // Cierra el modal de confirmación del carrito
        function closeModal() {
            if (cartModal) cartModal.classList.add('hidden');
        }

        // Muestra un modal de confirmación para la lista de deseos
        function showWishlistModal(title, message) {
            if (document.getElementById('wishlist-modal-title')) document.getElementById('wishlist-modal-title').textContent = title;
            if (document.getElementById('wishlist-modal-message')) document.getElementById('wishlist-modal-message').textContent = message;
            if (wishlistModal) wishlistModal.classList.remove('hidden');
        }

        // Cierra el modal de confirmación de la lista de deseos
        function closeWishlistModal() {
            if (wishlistModal) wishlistModal.classList.add('hidden');
        }

        // Guarda el estado actual del carrito en el almacenamiento local
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Guarda el estado actual de la lista de deseos en el almacenamiento local
        function saveWishlist() {
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
        }

        // Obtiene una lista de categorías únicas de los productos
        function getUniqueCategories() {
            const categories = new Set();
            products.forEach(p => categories.add(p.category));
            return Array.from(categories);
        }

        // Obtiene una lista de marcas únicas de los productos
        function getUniqueBrands() {
            const brands = new Set();
            products.forEach(p => brands.add(p.brand));
            return Array.from(brands);
        }

        // Obtiene una lista de certificaciones únicas de los productos
        function getUniqueCertifications() {
            const certs = new Set();
            products.forEach(p => {
                // Asegurarse de que p.certifications es un array antes de iterar
                if (Array.isArray(p.certifications)) {
                    p.certifications.forEach(cert => certs.add(cert));
                }
            });
            return Array.from(certs);
        }

        // Obtiene una lista de beneficios únicos de los productos
        function getUniqueBenefits() {
            const benefits = new Set();
            products.forEach(p => {
                // Asumimos que los beneficios están en `benefits_es` si existe, sino en `benefits` (antiguo)
                const currentBenefits = p.benefits_es || p.benefits || [];
                // Asegurarse de que currentBenefits es un array antes de iterar
                if (Array.isArray(currentBenefits)) {
                    currentBenefits.forEach(benefit => benefits.add(benefit));
                }
            });
            return Array.from(benefits);
        }

        // Actualiza el contenido de la página según el idioma actual
        function updateContentLanguage() {
            const lang = translations[currentLanguage];

            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (lang[key] !== undefined) { 
                    if (key === 'copyright') {
                        element.innerHTML = lang[key];
                    } else if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                        element.placeholder = lang[key];
                    } else {
                        element.textContent = lang[key];
                    }
                } else {
                    console.warn(`Translation key "${key}" not found or is undefined for language "${currentLanguage}".`);
                }
            });

            if (document.getElementById('promo-banner')) document.getElementById('promo-banner').textContent = lang.promoBanner;
            const shopLinkNode = document.querySelector('nav ul li:nth-child(2) a');
            if (shopLinkNode && shopLinkNode.childNodes.length > 0) {
                 // Actualiza solo el nodo de texto, preserva el icono
                 shopLinkNode.childNodes[0].nodeValue = lang.shop + ' '; 
            }
            
            populateCategoryMenu();
            // Esta función NO DEBE llamar a ninguna función de renderizado de página para evitar recursión.
        }

        // Abre el modal de la ficha técnica de un producto
        function openFichaTecnicaModal(productId) {
            const product = products.find(p => p.id === productId);
            const lang = translations[currentLanguage];

            if (!product) return;

            // Construye el contenido del modal con los detalles clave
            const origin = product[`origin_${currentLanguage}`] || product.origin_es;
            const process = product[`process_${currentLanguage}`] || product.process_es;
            const characteristics = product[`characteristics_${currentLanguage}`] || product.characteristics_es;

            const modalContent = `
                <img src="${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/150x150/D3D3D3/000000?text=NP';" class="w-36 h-36 object-contain rounded-lg shadow-sm flex-shrink-0">
                <div class="ficha-contenido flex-grow text-sm leading-relaxed text-gray-700">
                    <h4 class="font-bold text-lg mb-2">${lang.keyDetails}:</h4>
                    ${origin ? `<p><strong>${lang.origin}:</strong> ${origin}</p>` : ''}
                    ${process ? `<p><strong>${lang.process}:</strong> ${process}</p>` : ''}
                    ${characteristics ? `<p><strong>${lang.characteristics}:</strong> ${characteristics}</p>` : ''}
                    ${(!origin && !process && !characteristics) ? '<p>No hay detalles clave adicionales disponibles para este producto.</p>' : ''}
                </div>
            `;

            if (document.getElementById("modalTituloProducto")) document.getElementById("modalTituloProducto").innerHTML = product.name;
            if (document.getElementById("modalCuerpoFicha")) document.getElementById("modalCuerpoFicha").innerHTML = modalContent;
            if (fichaTecnicaModal) fichaTecnicaModal.classList.remove('hidden');
        }

        // Cierra el modal de la ficha técnica
        function closeFichaTecnicaModal() {
            if (fichaTecnicaModal) fichaTecnicaModal.classList.add('hidden');
        }

        // Calcula el precio por unidad, considerando precios al por mayor
        function getPricePerUnit(itemData, quantity, isComboItem) {
            if (isComboItem) {
                return parseFloat(itemData.price) || 0;
            } else {
                const detailPrice = parseFloat(itemData.priceDetail) || 0;
                const wholesalePrice = parseFloat(itemData.priceWholesale) || 0;
                const WHOLESALE_QUANTITY_THRESHOLD = 6; // Cantidad para aplicar precio al por mayor
                if (wholesalePrice > 0 && quantity >= WHOLESALE_QUANTITY_THRESHOLD) {
                    return wholesalePrice;
                }
                return detailPrice;
            }
        }

        // Añade un artículo (producto o combo) al carrito
        function addToCart(itemId, type = 'product') {
            let itemData;
            let isCombo = type === 'combo';

            if (isCombo) {
                itemData = combos.find(c => c.id === itemId);
                if (!itemData) {
                    console.error(`Combo con ID ${itemId} no encontrado. No se puede añadir al carrito.`);
                    return;
                }
            } else {
                itemData = products.find(p => p.id === itemId);
                if (!itemData) {
                    console.error(`Producto con ID ${itemId} no encontrado. No se puede añadir al carrito.`);
                    return;
                }
            }

            const existingItemIndex = cart.findIndex(item => item.productId === itemId);
            let newQuantity;

            if (existingItemIndex > -1) {
                newQuantity = cart[existingItemIndex].quantity + 1;
                cart[existingItemIndex].quantity = newQuantity;
            } else {
                newQuantity = 1;
                cart.push({ productId: itemId, quantity: newQuantity, type: type });
            }

            const itemInCart = cart.find(item => item.productId === itemId);
            if (itemInCart) {
                itemInCart.pricePerUnit = getPricePerUnit(itemData, newQuantity, isCombo);
            }

            saveCart();
            updateCartCount();
            showModal(translations[currentLanguage].productAdded, translations[currentLanguage].addedSuccessfully);
        }

        // Añade un combo específico al carrito
        function addToCartCombo(comboId) {
            addToCart(comboId, 'combo');
        }

        // Actualiza la cantidad de un artículo en el carrito (usado en la página del carrito)
        function updateQuantity(itemId, change) {
            console.log(`[updateQuantity] Intentando actualizar cantidad para item: ${itemId} con cambio: ${change}`);
            const itemIndex = cart.findIndex(item => item.productId === itemId);
            if (itemIndex > -1) {
                const itemInCart = cart[itemIndex];
                const isCombo = itemInCart.type === 'combo';
                let itemData = isCombo ? combos.find(c => c.id === itemId) : products.find(p => p.id === itemId);

                if (!itemData) {
                    console.error(`[updateQuantity] Item con ID ${itemId} no encontrado en los arrays de datos para la actualización de cantidad.`);
                    return;
                }

                let newQuantity = itemInCart.quantity + change;
                if (newQuantity < 0) newQuantity = 0; // No permitir cantidades negativas

                if (newQuantity === 0) {
                    cart.splice(itemIndex, 1); // Elimina el elemento si la cantidad llega a 0
                    console.log(`[updateQuantity] Elemento ${itemId} eliminado del carrito. Nuevo carrito:`, cart);
                } else {
                    itemInCart.quantity = newQuantity;
                    // Recalcula el precio por unidad, ya que podría cambiar si se alcanza el umbral de mayoreo
                    itemInCart.pricePerUnit = getPricePerUnit(itemData, newQuantity, isCombo);
                    if (isNaN(itemInCart.pricePerUnit)) {
                        console.warn(`[updateQuantity] El pricePerUnit calculado para el item ${itemId} no es un número: ${itemInCart.pricePerUnit}. Se establece en 0.`);
                        itemInCart.pricePerUnit = 0;
                    }
                    console.log(`[updateQuantity] Cantidad del item ${itemId} actualizada a ${newQuantity}. Nuevo precio por unidad: ${itemInCart.pricePerUnit}. Nuevo carrito:`, cart);
                }
                saveCart();
                updateCartCount();
                renderCart(); // Vuelve a renderizar el carrito para reflejar los cambios
                console.log(`[updateQuantity] Carrito re-renderizado después de la actualización de cantidad.`);
            } else {
                console.warn(`[updateQuantity] Item ${itemId} no encontrado en el carrito para la actualización de cantidad. Carrito actual:`, cart);
            }
        }

        // Actualiza la cantidad de un producto en el carrito desde un input numérico
        function updateProductQuantityInCartFromInput(inputElement, productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            let newQuantity = parseInt(inputElement.value) || 0;
            if (newQuantity < 0) newQuantity = 0;

            const itemIndex = cart.findIndex(item => item.productId === productId);

            if (newQuantity > 0) {
                if (itemIndex > -1) {
                    cart[itemIndex].quantity = newQuantity;
                } else {
                    cart.push({
                        productId: productId,
                        quantity: newQuantity,
                        type: 'product',
                        pricePerUnit: getPricePerUnit(product, newQuantity, false)
                    });
                }
                const updatedItem = cart.find(item => item.productId === productId);
                if (updatedItem) {
                    updatedItem.pricePerUnit = getPricePerUnit(product, newQuantity, false);
                    if (isNaN(updatedItem.pricePerUnit)) {
                        console.warn(`[updateProductQuantityInCartFromInput] El pricePerUnit calculado para el producto ${productId} no es un número: ${updatedItem.pricePerUnit}. Se establece en 0.`);
                        updatedItem.pricePerUnit = 0;
                    }
                }
            } else {
                if (itemIndex > -1) {
                    cart.splice(itemIndex, 1);
                }
            }
            saveCart();
            updateCartCount();
            // Re-renderiza la página actual si es necesario (ej. si estás en la tienda o en el detalle del producto)
            if (['shop', 'home', 'product', 'offers', 'wishlist'].includes(currentPage)) {
                renderPage(currentPage, window.location.hash.substring(1).split('-')[1]);
            }
        }

        // Actualiza la cantidad de un producto en el carrito (usado en tarjetas de producto)
        function updateProductQuantityInCart(productId, change) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const inputElement = document.querySelector(`input[data-product-id="${productId}"]`);
            if (!inputElement) return;

            let currentQuantity = parseInt(inputElement.value) || 0;
            let newQuantity = currentQuantity + change;

            if (newQuantity < 0) newQuantity = 0;

            const itemIndex = cart.findIndex(item => item.productId === productId);
            if (newQuantity > 0) {
                if (itemIndex > -1) {
                    cart[itemIndex].quantity = newQuantity;
                } else {
                    cart.push({ productId, quantity: newQuantity, type: 'product', pricePerUnit: getPricePerUnit(product, newQuantity, false) });
                }
                const updatedItem = cart.find(item => item.productId === productId);
                if (updatedItem) {
                    updatedItem.pricePerUnit = getPricePerUnit(product, newQuantity, false);
                    if (isNaN(updatedItem.pricePerUnit)) {
                        console.warn(`[updateProductQuantityInCart] El pricePerUnit calculado para el producto ${productId} no es un número: ${updatedItem.pricePerUnit}. Se establece en 0.`);
                        updatedItem.pricePerUnit = 0;
                    }
                }
            } else {
                if (itemIndex > -1) {
                    cart.splice(itemIndex, 1);
                }
            }

            inputElement.value = newQuantity > 0 ? newQuantity : 0;
            saveCart();
            updateCartCount();
        }

        // Elimina un artículo del carrito
        function removeFromCart(itemId) {
            cart = cart.filter(item => item.productId !== itemId);
            saveCart();
            updateCartCount();
            renderCart();
        }

        // Calcula los totales del carrito (subtotal, descuento, envío, total)
        function calculateCartTotals() {
            console.log("Calculando totales del carrito...");
            let subtotal = 0;
            cart.forEach(item => {
                let itemData;
                if (item.type === 'combo') {
                    itemData = combos.find(c => c.id === item.productId);
                } else {
                    itemData = products.find(p => p.id === item.productId);
                }
                
                if (itemData) {
                    // Asegúrate de que item.pricePerUnit se establezca aquí antes de usarlo para subtotal
                    item.pricePerUnit = getPricePerUnit(itemData, item.quantity, item.type === 'combo');
                    subtotal += item.quantity * (item.pricePerUnit || 0); 
                }
            });

            let discount = 0;
            if (subtotal >= 2000) {
                discount = subtotal * 0.10;
            } else if (subtotal >= 1000) {
                discount = subtotal * 0.05;
            }

            let shippingCost = 0;
            const deliveryMethodRadio = document.querySelector('input[name="delivery-method"]:checked');
            const deliveryMethod = deliveryMethodRadio ? deliveryMethodRadio.value : '';
            const customerAddressInput = document.getElementById('customer-address');
            const customerAddress = customerAddressInput ? customerAddressInput.value.toLowerCase().trim() : '';

            if (deliveryMethod === "A Domicilio") {
                if (customerAddress.includes("santo domingo") || customerAddress.includes("dn") || customerAddress.includes("distrito nacional")) {
                    shippingCost = 300;
                } else if (customerAddress !== '') { // Si hay una dirección pero no es SD/DN, asume fuera.
                    shippingCost = 600;
                } else { // Si no hay dirección, el costo es 0 (no se puede calcular aún)
                    shippingCost = 0; 
                }
            } else if (deliveryMethod === "Recoger en Tienda") {
                shippingCost = 0;
            }

            const total = subtotal - discount + shippingCost;

            const subtotalDisplay = document.getElementById('display-subtotal');
            const discountDisplay = document.getElementById('display-discount');
            const shippingDisplay = document.getElementById('display-shippingCost');
            const totalDisplay = document.getElementById('display-total');
            const subtotalLabel = document.getElementById('display-subtotal-label');
            const discountLabel = document.getElementById('display-discount-label');
            const shippingLabel = document.getElementById('display-shippingCost-label');
            const totalLabel = document.getElementById('display-total-label');


            if (subtotalDisplay) subtotalDisplay.textContent = formatPrice(subtotal);
            if (discountDisplay) discountDisplay.textContent = `-${formatPrice(discount)}`;
            if (shippingDisplay) shippingDisplay.textContent = `+${formatPrice(shippingCost)}`;
            if (totalDisplay) totalDisplay.textContent = formatPrice(total);

            if (subtotalLabel) subtotalLabel.textContent = translations[currentLanguage].subtotal;
            if (discountLabel) discountLabel.textContent = translations[currentLanguage].discount;
            if (shippingLabel) shippingLabel.textContent = translations[currentLanguage].shippingCost;
            if (totalLabel) totalLabel.textContent = translations[currentLanguage].total;

            console.log("Totales del carrito calculados y actualizados:", { subtotal, discount, shippingCost, total });

            return { subtotal, discount, shippingCost, total };
        }

        // Obtiene el valor seleccionado de un grupo de radio buttons
        function getSelectedRadioValue(name) {
            const radios = document.querySelectorAll(`input[name="${name}"]:checked`);
            return radios.length > 0 ? radios[0].value : null;
        }

        // Muestra/oculta los detalles bancarios según el método de pago
        function toggleBankDetails() {
            const paymentTransferRadio = document.getElementById('payment-transfer');
            const bankDetailsDiv = document.getElementById('bank-accounts-details');
            if (paymentTransferRadio && bankDetailsDiv) {
                if (paymentTransferRadio.checked) {
                    bankDetailsDiv.classList.remove('hidden');
                } else {
                    bankDetailsDiv.classList.add('hidden');
                }
            }
        }

        // Inicializa los listeners de eventos para el formulario del carrito
        function initCartFormListeners() {
            // Asegúrate de que estos elementos existan antes de añadir listeners
            const customerAddressInput = document.getElementById('customer-address');
            if (customerAddressInput) {
                customerAddressInput.removeEventListener('input', calculateCartTotals); // Elimina el listener anterior para evitar duplicados
                customerAddressInput.addEventListener('input', calculateCartTotals);
            }

            const deliveryHomeRadio = document.getElementById('delivery-home');
            if (deliveryHomeRadio) {
                deliveryHomeRadio.removeEventListener('change', calculateCartTotals);
                deliveryHomeRadio.addEventListener('change', calculateCartTotals);
            }

            const deliveryStoreRadio = document.getElementById('delivery-store');
            if (deliveryStoreRadio) {
                deliveryStoreRadio.removeEventListener('change', calculateCartTotals);
                deliveryStoreRadio.addEventListener('change', calculateCartTotals);
            }

            const paymentCashRadio = document.getElementById('payment-cash');
            if (paymentCashRadio) {
                paymentCashRadio.removeEventListener('change', toggleBankDetails);
                paymentCashRadio.addEventListener('change', toggleBankDetails);
            }

            const paymentTransferRadio = document.getElementById('payment-transfer');
            if (paymentTransferRadio) {
                paymentTransferRadio.removeEventListener('change', toggleBankDetails);
                paymentTransferRadio.addEventListener('change', toggleBankDetails);
            }
        }

        // Procesa el pedido y envía los detalles por WhatsApp
        function checkoutOrder() {
            const lang = translations[currentLanguage];
            console.log("Intentando finalizar compra.");

            if (cart.length === 0) {
                showModal(lang.cartEmpty, lang.cartEmpty);
                console.warn("Finalización de compra abortada: El carrito está vacío.");
                return;
            }

            const customerNameInput = document.getElementById('customer-name');
            const customerAddressInput = document.getElementById('customer-address');
            const customerPhoneInput = document.getElementById('customer-phone-order'); // Corrected typo here

            const customerName = customerNameInput ? customerNameInput.value.trim() : '';
            const customerAddress = customerAddressInput ? customerAddressInput.value.trim() : '';
            const customerPhone = customerPhoneInput ? customerPhoneInput.value.trim() : ''; // Corrected typo here
            
            const deliveryMethod = getSelectedRadioValue('delivery-method');
            const paymentMethod = getSelectedRadioValue('payment-method');

            let allFieldsValid = true;

            // Validación de campos: añade/elimina borde rojo
            if (!customerName) { customerNameInput?.classList.add('border-red-500'); allFieldsValid = false; } else { customerNameInput?.classList.remove('border-red-500'); }
            if (!customerPhone || !/^\d{7,}$/.test(customerPhone)) { 
                customerPhoneInput?.classList.add('border-red-500'); allFieldsValid = false; 
            } else { 
                customerPhoneInput?.classList.remove('border-red-500'); 
            }
            
            // Validación de método de entrega
            if (!deliveryMethod) { 
                document.querySelectorAll('input[name="delivery-method"]').forEach(el => el.closest('label').classList.add('text-red-500'));
                allFieldsValid = false; 
            } else {
                document.querySelectorAll('input[name="delivery-method"]').forEach(el => el.closest('label').classList.remove('text-red-500'));
            }

            // Validación de dirección si es a domicilio
            if (deliveryMethod === "A Domicilio" && customerAddress === '') {
                customerAddressInput?.classList.add('border-red-500'); allFieldsValid = false; 
            } else {
                customerAddressInput?.classList.remove('border-red-500');
            }

            // Validación de método de pago
            if (!paymentMethod) { 
                document.querySelectorAll('input[name="payment-method"]').forEach(el => el.closest('label').classList.add('text-red-500'));
                allFieldsValid = false; 
            } else {
                document.querySelectorAll('input[name="payment-method"]').forEach(el => el.closest('label').classList.remove('text-red-500'));
            }

            if (!allFieldsValid) {
                showModal(lang.requiredFields, lang.completeYourDetails);
                console.warn("Finalización de compra abortada: Fallo en la validación.");
                return;
            }

            const { subtotal, discount, shippingCost, total } = calculateCartTotals();
            console.log("Finalización de compra: Totales para mensaje de WhatsApp:", { subtotal, discount, shippingCost, total });

            let whatsappMessage = `¡Hola! Me gustaría hacer un pedido de R&F Productos Integrales.\n\n`;
            whatsappMessage += `*--- Datos del Cliente ---*\n`;
            whatsappMessage += `🙋 *Nombre:* ${customerName}\n`;
            whatsappMessage += `📞 *Teléfono:* ${customerPhone}\n`;
            whatsappMessage += `📍 *Dirección:* ${deliveryMethod === "A Domicilio" ? customerAddress : "Recoger en Tienda"}\n`;
            whatsappMessage += `🚚 *Método de Entrega:* ${deliveryMethod}\n`;
            whatsappMessage += `💰 *Método de Pago:* ${paymentMethod}\n`;
            if (paymentMethod === "Transferencia Bancaria") {
                whatsappMessage += `🏦 *Cuentas para Transferencia:*\n`;
                whatsappMessage += `   - ${lang.bankPopular}\n`;
                whatsappMessage += `   - ${lang.banreservas}\n`;
                whatsappMessage += `   - ${lang.bhd}\n`;
            }
            whatsappMessage += `\n*--- Detalles del Pedido ---*\n`;
            
            cart.forEach(item => {
                const isCombo = item.type === 'combo';
                let name, pricePerUnit;

                if (isCombo) {
                    const combo = combos.find(c => c.id === item.productId);
                    name = combo ? combo.name : 'Combo Desconocido';
                    pricePerUnit = combo ? combo.price : 0;
                } else {
                    const product = products.find(p => p.id === item.productId);
                    name = product ? product.name : 'Producto Desconocido';
                    // Reutiliza la lógica de precio por unidad para asegurar la consistencia
                    pricePerUnit = product ? getPricePerUnit(product, item.quantity, false) : 0;
                }
                whatsappMessage += `- ${name} x${item.quantity} (RD$${(pricePerUnit || 0).toFixed(2)} c/u)\n`;
            });

            whatsappMessage += `\n*🧾 ${translations[currentLanguage].subtotal}* ${formatPrice(subtotal)}`;
            whatsappMessage += `\n*🎁 ${translations[currentLanguage].discount}* -${formatPrice(discount)}`;
            whatsappMessage += `\n*🚚 ${translations[currentLanguage].shippingCost}* +${formatPrice(shippingCost)}`;
            whatsappMessage += `\n*💳 ${translations[currentLanguage].total}* ${formatPrice(total)}`;
            whatsappMessage += `\n\n*Nota Importante sobre Descuentos:*\n${lang.discountNote}\n\n`;

            whatsappMessage += `Por favor, envíame los detalles para completar la compra. ¡Gracias!`;

            const encodedMessage = encodeURIComponent(whatsappMessage);
            const whatsappNumber = '18094254540'; // Número de WhatsApp de R&F Productos Integrales
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;

            window.open(whatsappUrl, '_blank');
            console.log("URL de WhatsApp abierta:", whatsappUrl);

            // Limpia el carrito y los campos del formulario después del envío (simulado)
            cart = [];
            saveCart();
            updateCartCount();
            showModal(lang.orderSent, lang.orderSentMessage);
            if (customerNameInput) customerNameInput.value = '';
            if (customerAddressInput) customerAddressInput.value = '';
            if (customerPhoneInput) customerPhoneInput.value = '';
            document.querySelectorAll('input[name="delivery-method"]').forEach(el => el.checked = false);
            document.querySelectorAll('input[name="payment-method"]').forEach(el => el.checked = false);
            toggleBankDetails(); // Oculta los detalles bancarios si estaban visibles

            // Navega a la página de inicio después de un breve retraso para que el usuario vea el modal
            setTimeout(() => navigateTo('home', null, event), 3000);
        }

        // Añade un artículo (producto o combo) a la lista de deseos
        function addToWishlist(itemId, type = 'product') {
            if (!wishlist.includes(itemId)) {
                wishlist.push(itemId);
                saveWishlist();
                updateWishlistCount();
                showWishlistModal(translations[currentLanguage].addedToWishlist, translations[currentLanguage].addedSuccessfully);
            } else {
                showWishlistModal(translations[currentLanguage].wishlistPageTitle, `¡Este producto ya está en tu Lista de Deseos!`);
            }
        }

        // Elimina un artículo de la lista de deseos
        function removeFromWishlist(itemId) {
            wishlist = wishlist.filter(id => id !== itemId);
            saveWishlist();
            updateWishlistCount();
            renderWishlist(); // Vuelve a renderizar la lista de deseos
            showWishlistModal(translations[currentLanguage].removedFromWishlist, `El producto ha sido eliminado de tu Lista de Deseos.`);
        }

        // Función central para la navegación entre páginas
        function navigateTo(page, param = null, event = null) {
            console.log(`[navigateTo] Intentando navegación a la página: ${page} con parámetro: ${param}`);
            if (event) {
                event.preventDefault(); 
                console.log(`[navigateTo] Evento prevenido para: ${event.type}`);
            }
            
            const newHash = page + (param ? `-${param}` : '');
            
            // Solo actualiza el hash si es diferente para evitar entradas duplicadas en el historial del navegador
            // O si el hash es el mismo pero forzamos el renderizado (ej. al cambiar de idioma)
            if (window.location.hash.substring(1) !== newHash || (event && event.type === 'click')) { // Added click check
                window.location.hash = newHash;
                console.log(`[navigateTo] Hash actualizado a: ${newHash}`);
            } else {
                console.log(`[navigateTo] El hash ya es: ${newHash}. Forzando renderizado de la página.`);
                renderPage(page, param); // Forzar renderizado incluso if the hash is the same
            }
        }

        // --- Funciones Principales de Renderizado ---
        // Renderiza páginas genéricas (Acerca de Nosotros, Contacto, etc.)
        function renderGenericPage(titleKey, contentKey) {
            const lang = translations[currentLanguage];
            if (appContent) { 
                appContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-8 max-w-3xl mx-auto border border-gray-200">
                        <h1 class="text-3xl font-bold text-primary mb-6 text-center">${lang[titleKey]}</h1>
                        <div class="text-gray-800 leading-relaxed">
                            ${lang[contentKey]}
                        </div>
                    </div>
                `;
            }
            updateContentLanguage(); // Asegura que los textos de elementos con data-translate se actualicen
        }

        // Renderiza páginas específicas del footer (para mantener el código limpio)
        // Se definen como arrow functions para ser concisas.
        const renderContact = () => renderGenericPage('contact', 'contactPageContent');
        const renderHelpFAQ = () => renderGenericPage('helpFAQ', 'helpFAQPageContent');
        const renderBlog = () => renderGenericPage('blog', 'blogPageContent');
        const renderPrivacyPolicy = () => renderGenericPage('privacyPolicy', 'privacyPolicyPageContent');
        const renderTermsOfUse = () => renderGenericPage('termsOfUse', 'termsOfUsePageContent');
        const renderShippingPolicy = () => renderGenericPage('shippingPolicy', 'shippingPolicyPageContent');
        const renderReturnPolicy = () => renderGenericPage('returnPolicy', 'returnPolicyPageContent');
        const renderPaymentMethods = () => renderGenericPage('paymentMethods', 'paymentMethodsPageContent');
        const renderAboutUs = () => renderGenericPage('aboutUsPageTitle', 'aboutUsPageContent');


        // Renderiza la página de inicio
        function renderHome() {
            const lang = translations[currentLanguage];
            if (!appContent) return; 

            appContent.innerHTML = `
                <section class="relative h-[250px] md:h-[350px] lg:h-[450px] w-full overflow-hidden rounded-lg shadow-lg mb-12">
                    <div id="hero-carousel" class="absolute inset-0">
                        ${carouselImages.map((item, index) => `
                            <div class="carousel-item ${index === 0 ? 'active' : ''}" style="background-image: url('${item.src}');">
                                <div class="carousel-content bg-black bg-opacity-40 p-6 rounded-lg mx-4">
                                    <h1 class="text-3xl md:text-5xl font-extrabold mb-2 animate-fade-in">${item[`title_${currentLanguage}`] || ''}</h1>
                                    <p class="text-lg md:text-xl mb-6 opacity-90 animate-fade-in-delay">${item[`subtitle_${currentLanguage}`] || ''}</p>
                                    ${item.buttonText_es ? `<a href="${item.buttonLink}" onclick="navigateTo('${item.buttonLink.substring(1)}', null, event)" class="bg-white text-primary px-6 py-3 rounded-full text-md md:text-lg font-semibold hover:bg-green-100 hover-scale transition duration-300 shadow-md">
                                        ${item[`buttonText_${currentLanguage}`]}
                                    </a>` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <button class="carousel-control-btn left-4" onclick="changeSlide(-1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-control-btn right-4" onclick="changeSlide(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <div class="carousel-dots">
                        ${carouselImages.map((_, index) => `
                            <span class="carousel-dot ${index === 0 ? 'active' : ''}" onclick="currentSlide(${index})"></span>
                        `).join('')}
                    </div>
                </section>

                <section class="new-products-home mb-12">
                    <h2 class="text-3xl font-bold text-center mb-8 text-primary">${lang.newProducts}</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                        ${products.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded)).slice(0, 4).map(p => `
                            <div class="bg-white rounded-lg shadow-md p-6 text-center hover-scale flex flex-col justify-between">
                                <a href="#product-${p.id}" onclick="navigateTo('product', '${p.id}', event)" class="block">
                                    <img src="${p.image}" alt="${p.name}" onerror="this.onerror=null;this.src='https://placehold.co/400x400/D3D3D3/000000?text=Imagen+No+Disp';" class="w-full h-48 object-contain mb-4 mx-auto rounded-md">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-2 px-4 pt-2">${p.name}</h3>
                                </a>
                                <p class="text-gray-600 text-sm mb-4">${p.brand}</p>
                                <p class="text-xl font-bold text-primary mb-4">${formatPrice(p.priceDetail)}</p>
                                <button onclick="addToCart('${p.id}')" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-200">
                                    ${lang.addToCart}
                                </button>
                                <button onclick="addToWishlist('${p.id}', 'product')" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 mt-2" data-translate="addToWishlist">
                                    <i class="fas fa-heart ${wishlist.includes(p.id) ? 'text-red-500' : ''}"></i> ${lang.addToWishlist}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </section>

                <section class="best-sellers-home mb-12">
                    <h2 class="text-3xl font-bold text-center mb-8 text-primary">${lang.bestSellers}</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                        ${products.sort((a, b) => b.salesCount - a.salesCount).slice(0, 4).map(p => `
                            <div class="bg-white rounded-lg shadow-md p-6 text-center hover-scale flex flex-col justify-between">
                                <a href="#product-${p.id}" onclick="navigateTo('product', '${p.id}', event)" class="block">
                                    <img src="${p.image}" alt="${p.name}" onerror="this.onerror=null;this.src='https://placehold.co/400x400/D3D3D3/000000?text=Imagen+No+Disp';" class="w-full h-48 object-contain mb-4 mx-auto rounded-md">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-2 px-4 pt-2">${p.name}</h3>
                                </a>
                                <p class="text-gray-600 text-sm mb-4">${p.brand}</p>
                                <p class="text-xl font-bold text-primary mb-4">${formatPrice(p.priceDetail)}</p>
                                <button onclick="addToCart('${p.id}')" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-200">
                                    ${lang.addToCart}
                                </button>
                                <button onclick="addToWishlist('${p.id}', 'product')" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 mt-2" data-translate="addToWishlist">
                                    <i class="fas fa-heart ${wishlist.includes(p.id) ? 'text-red-500' : ''}"></i> ${lang.addToWishlist}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            initCarousel(); // Inicializa el carrusel al renderizar la página de inicio
            updateContentLanguage(); // Apply translations to newly rendered content
        }

        // Inicializa la lógica del carrusel (muestra diapositivas y establece el intervalo)
        function initCarousel() {
            showSlides(slideIndex);
            clearInterval(carouselInterval); // Limpia cualquier intervalo existente
            carouselInterval = setInterval(() => {
                changeSlide(1); // Cambia de diapositiva automáticamente cada 5 segundos
            }, 5000);
        }

        // Muestra una diapositiva específica del carrusel
        function showSlides(n) {
            const slides = document.getElementsByClassName("carousel-item");
            const dots = document.getElementsByClassName("carousel-dot");
            if (slides.length === 0) return; 

            if (n >= slides.length) { slideIndex = 0 } 
            if (n < 0) { slideIndex = slides.length - 1 }

            // Oculta todas las diapositivas y desactiva todos los puntos
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove('active');
            }
            for (let i = 0; i < dots.length; i++) {
                dots[i].classList.remove('active');
            }
            // Muestra la diapositiva actual y activa su punto correspondiente
            slides[slideIndex].classList.add('active');
            dots[slideIndex].classList.add('active');
        }

        // Cambia la diapositiva del carrusel (adelante/atrás)
        function changeSlide(n) {
            showSlides(slideIndex += n);
            clearInterval(carouselInterval); // Reinicia el intervalo al cambiar manualmente
            carouselInterval = setInterval(() => {
                changeSlide(1);
            }, 5000);
        }

        // Navega a una diapositiva específica del carrusel
        function currentSlide(n) {
            showSlides(slideIndex = n);
            clearInterval(carouselInterval); // Reinicia el intervalo al ir a una diapositiva específica
            carouselInterval = setInterval(() => {
                changeSlide(1);
            }, 5000);
        }

        // Renderiza la página de la tienda, aplicando filtros y ordenamiento
        function renderShop(filter = {}, sort = 'relevance', displaySidebar = true) {
            const lang = translations[currentLanguage];
            let filteredProducts = [...products];

            // Aplica el filtro de búsqueda si existe
            const currentSearchQuery = searchInput ? searchInput.value.toLowerCase() : ''; 
            if (currentSearchQuery) {
                filteredProducts = filteredProducts.filter(p =>
                    p.name.toLowerCase().includes(currentSearchQuery) ||
                    (p.description_es && p.description_es.toLowerCase().includes(currentSearchQuery)) ||
                    (p.brand && p.brand.toLowerCase().includes(currentSearchQuery)) ||
                    (p.category && p.category.toLowerCase().includes(currentSearchQuery)) ||
                    (p.normalizedCategory && p.normalizedCategory.toLowerCase().includes(currentSearchQuery))
                );
            }

            // Recupera los valores actuales de los filtros desde el DOM (si existen)
            const brandFilter = document.getElementById('filter-brand')?.value;
            const categoryFilterFromUI = document.getElementById('filter-category')?.value;
            const benefitFilter = document.getElementById('filter-benefit')?.value;
            const certificationFilter = document.getElementById('filter-certification')?.value;
            const minPriceFilter = parseFloat(document.getElementById('filter-price-min')?.value);
            const maxPriceFilter = parseFloat(document.getElementById('filter-price-max')?.value);

            // Usa el filtro de categoría pasado como parámetro o el de la UI
            const activeCategoryFilter = filter.category || categoryFilterFromUI || '';

            // Aplica los filtros
            if (brandFilter) { filteredProducts = filteredProducts.filter(p => p.brand === brandFilter); }
            if (activeCategoryFilter) { filteredProducts = filteredProducts.filter(p => p.normalizedCategory === activeCategoryFilter); }
            if (benefitFilter) { 
                filteredProducts = filteredProducts.filter(p => {
                    const productBenefits = p.benefits_es || p.benefits || [];
                    return Array.isArray(productBenefits) && productBenefits.includes(benefitFilter);
                }); 
            }
            if (certificationFilter) { 
                filteredProducts = filteredProducts.filter(p => {
                    const productCerts = p.certifications || [];
                    return Array.isArray(productCerts) && productCerts.includes(certificationFilter);
                }); 
            }
            if (minPriceFilter !== undefined && !isNaN(minPriceFilter)) { filteredProducts = filteredProducts.filter(p => p.priceDetail >= minPriceFilter); }
            if (maxPriceFilter !== undefined && !isNaN(maxPriceFilter)) { filteredProducts = filteredProducts.filter(p => p.priceDetail <= maxPriceFilter); }

            // Filtro específico para la página de ofertas
            if (filter.isOffer) {
                filteredProducts = filteredProducts.filter(p => p.isOffer === true);
            }
            
            // Aplica el ordenamiento
            switch (sort) {
                case 'priceAsc':
                    filteredProducts.sort((a, b) => a.priceDetail - b.priceDetail);
                    break;
                case 'priceDesc':
                    filteredProducts.sort((a, b) => b.priceDetail - a.priceDetail);
                    break;
                case 'new':
                    filteredProducts.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
                    break;
                case 'bestsellers':
                    filteredProducts.sort((a, b) => b.salesCount - a.salesCount);
                    break;
                case 'customerRating':
                    // NOTA: La calificación de clientes no está implementada con datos reales de momento.
                    // El ordenamiento no tendrá un efecto significativo sin esos datos.
                    // Por ahora, no hace nada o mantiene el orden actual/alfabético.
                    filteredProducts.sort((a, b) => a.name.localeCompare(b.name)); // Mantener orden alfabético
                    break;
                case 'relevance':
                default:
                    filteredProducts.sort((a, b) => a.name.localeCompare(b.name)); // Orden alfabético por defecto
                    break;
            }

            let individualOffersHtml = '';
            // Si es la página de ofertas, solo muestra un subconjunto y añade un título de ofertas individuales
            if (filter.isOffer) {
                // Aquí podrías querer mostrar más productos en la sección de ofertas si tienes muchos
                filteredProducts = filteredProducts.slice(0, 8); // Ajustado para mostrar más ofertas individuales
                if (filteredProducts.length > 0) {
                     individualOffersHtml = `<h3 class="text-2xl font-bold text-primary mb-6 mt-8">${lang.individualOffers}</h3>`;
                }
            }

            const categories = getUniqueCategories();
            const brands = getUniqueBrands();
            const certifications = getUniqueCertifications();
            const benefits = getUniqueBenefits();

            let sidebarHtml = '';
            let mainContentWidthClass = 'lg:w-3/4'; // Ancho por defecto con barra lateral

            if (displaySidebar) {
                mainContentWidthClass = 'lg:w-3/4';
                sidebarHtml = `
                    <aside class="lg:w-1/4 bg-white p-6 rounded-lg shadow-md mb-8 lg:mb-0">
                        <h3 class="text-xl font-bold text-primary mb-6" data-translate="filterBy">${lang.filterBy}</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="filter-brand" class="block text-gray-700 font-semibold mb-2" data-translate="brand">${lang.brand}</label>
                                <select id="filter-brand" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="" data-translate="all">${lang.all}</option>
                                    ${brands.map(b => `<option value="${b}" ${brandFilter === b ? 'selected' : ''}>${b}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label for="filter-category" class="block text-gray-700 font-semibold mb-2" data-translate="productType">${lang.productType}</label>
                                <select id="filter-category" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="" data-translate="all">${lang.all}</option>
                                    ${categories.map(c => `
                                        <option value="${toKebabCase(c)}" ${activeCategoryFilter === toKebabCase(c) ? 'selected' : ''} data-translate="${toKebabCase(c)}">
                                            ${translations[currentLanguage][toKebabCase(c)] || c}
                                        </option>
                                    `).join('')}
                                </select>
                            </div>
                            <div>
                                <label for="filter-benefit" class="block text-gray-700 font-semibold mb-2" data-translate="healthBenefit">${lang.healthBenefit}</label>
                                <select id="filter-benefit" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="" data-translate="all">${lang.all}</option>
                                    ${benefits.map(b => `<option value="${b}" ${benefitFilter === b ? 'selected' : ''}>${b}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label for="filter-certification" class="block text-gray-700 font-semibold mb-2" data-translate="certifications">${lang.certifications}</label>
                                <select id="filter-certification" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="" data-translate="all">${lang.all}</option>
                                    ${certifications.map(c => `<option value="${c}" ${certificationFilter === c ? 'selected' : ''}>${c}</option>`).join('')}
                                    </select>
                            </div>
                            <div>
                                <label for="filter-price-min" class="block text-gray-700 font-semibold mb-2" data-translate="price">${lang.price} (Min)</label>
                                <input type="number" id="filter-price-min" placeholder="0" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary" value="${minPriceFilter !== undefined ? minPriceFilter : ''}">
                            </div>
                            <div>
                                <label for="filter-price-max" class="block text-gray-700 font-semibold mb-2" data-translate="price">${lang.price} (Max)</label>
                                <input type="number" id="filter-price-max" placeholder="10000" class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary" value="${maxPriceFilter !== undefined ? maxPriceFilter : ''}">
                            </div>
                            <button onclick="applyFiltersAndSort()" class="w-full bg-primary text-white py-2 rounded-md hover:bg-green-700 transition duration-200" data-translate="applyFilters">${lang.applyFilters}</button>
                        </div>
                    </aside>
                `;
            } else {
                mainContentWidthClass = 'lg:w-full'; 
                sidebarHtml = '';
            }

            if (appContent) { 
                appContent.innerHTML = `
                    <div class="flex flex-col lg:flex-row gap-8">
                        ${sidebarHtml}
                        <section class="${mainContentWidthClass}">
                            <div class="flex justify-between items-center mb-6 flex-wrap">
                                <h2 class="text-3xl font-bold text-primary">
                                    ${filter.isOffer ? lang.offers : lang.shop}
                                </h2>
                                ${displaySidebar ? `
                                <div class="flex items-center space-x-2 mt-4 lg:mt-0">
                                    <label for="sort-options" class="text-gray-700" data-translate="sortBy">${lang.sortBy}:</label>
                                    <select id="sort-options" onchange="applyFiltersAndSort()" class="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                        <option value="relevance" ${sort === 'relevance' ? 'selected' : ''} data-translate="relevance">${lang.relevance}</option>
                                        <option value="priceAsc" ${sort === 'priceAsc' ? 'selected' : ''} data-translate="priceAsc">${lang.priceAsc}</option>
                                        <option value="priceDesc" ${sort === 'priceDesc' ? 'selected' : ''} data-translate="priceDesc">${lang.priceDesc}</option>
                                        <option value="new" ${sort === 'new' ? 'selected' : ''} data-translate="newest">${lang.newest}</option>
                                        <option value="bestsellers" ${sort === 'bestsellers' ? 'selected' : ''} data-translate="mostSold">${lang.mostSold}</option>
                                        <option value="customerRating" ${sort === 'customerRating' ? 'selected' : ''} data-translate="customerRating">${lang.customerRating}</option>
                                    </select>
                                </div>
                                ` : ''}
                            </div>

                            ${filter.isOffer ? `
                                <h3 class="text-2xl font-bold text-primary mb-6">${lang.comboOffers}</h3>
                                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-6 mb-12">
                                    ${combos.map(combo => `
                                        <div class="bg-white rounded-lg shadow-md overflow-hidden hover-scale flex flex-col">
                                            <a href="#combo-${combo.id}" onclick="navigateTo('combo', '${combo.id}', event)" class="block">
                                                <img src="${combo.image}" alt="${combo.name}" onerror="this.onerror=null;this.src='https://placehold.co/400x200/D3D3D3/000000?text=Combo+Image';" class="w-full h-48 object-cover p-4 rounded-t-lg">
                                                <h3 class="text-xl font-semibold text-gray-800 mb-2 px-4 pt-2">${combo.name}</h3>
                                            </a>
                                            <div class="p-4 flex-grow flex flex-col justify-between">
                                                <p class="text-gray-600 text-sm mb-3">${combo[`description_${currentLanguage}`]}</p>
                                                <p class="text-2xl font-bold text-red-600 mb-4">${formatPrice(combo.price)} <span class="text-sm text-gray-500 line-through">${formatPrice(combo.originalPrice)}</span></p>
                                                <button onclick="addToCartCombo('${combo.id}')" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-200">
                                                    ${lang.addToCart}
                                                </button>
                                                <button onclick="addToWishlist('${combo.id}', 'combo')" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 mt-2" data-translate="addToWishlist">
                                                    <i class="fas fa-heart ${wishlist.includes(combo.id) ? 'text-red-500' : ''}"></i> ${lang.addToWishlist}
                                                </button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                ${individualOffersHtml}
                            ` : ''}

                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 ${filter.isOffer ? 'xl:grid-cols-4' : 'lg:grid-cols-3'} gap-6">
                                ${filteredProducts.length > 0 ?
                                    filteredProducts.map(p => `
                                        <div class="bg-white rounded-lg shadow-md overflow-hidden hover-scale flex flex-col">
                                            <a href="#product-${p.id}" onclick="navigateTo('product', '${p.id}', event)" class="block">
                                                <img src="${p.image}" alt="${p.name}" onerror="this.onerror=null;this.src='https://placehold.co/400x400/D3D3D3/000000?text=Imagen+No+Disp';" class="w-full h-48 object-contain mb-4 mx-auto rounded-md">
                                                <h3 class="text-lg font-semibold text-gray-800 mb-1 px-4 pt-2">${p.name}</h3>
                                            </a>
                                            <div class="p-4 flex-grow flex flex-col justify-between">
                                                <p class="text-gray-600 text-sm mb-2">${p.brand}</p>
                                                <p class="text-xl font-bold text-primary mb-3">${formatPrice(p.priceDetail)} ${p.priceWholesale && p.priceWholesale !== p.priceDetail ? `<span class="text-sm text-gray-500">(RD$${(p.priceWholesale || 0).toFixed(2)} Mayor)</span>` : ''}</p>
                                                <div class="flex items-center justify-center space-x-2 mt-2">
                                                    <button onclick="updateProductQuantityInCart('${p.id}', -1)" class="bg-gray-200 text-gray-700 w-8 h-8 rounded-full hover:bg-gray-300 transition duration-200">-</button>
                                                    <input type="number" min="0" value="${(cart.find(item => item.productId === p.id)?.quantity || 0)}" 
                                                           data-product-id="${p.id}" 
                                                           onchange="updateProductQuantityInCartFromInput(this, '${p.id}')"
                                                           onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                                           class="w-16 text-center border border-gray-300 rounded-md p-1 focus:outline-none focus:ring-1 focus:ring-primary">
                                                    <button onclick="updateProductQuantityInCart('${p.id}', 1)" class="bg-gray-200 text-gray-700 w-8 h-8 rounded-full hover:bg-gray-300 transition duration-200">+</button>
                                                </div>
                                                <button onclick="addToCart('${p.id}')" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-200 mt-4">
                                                    ${lang.addToCart}
                                                </button>
                                                <button onclick="addToWishlist('${p.id}', 'product')" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-full hover:bg-gray-300 transition duration-200 mt-2" data-translate="addToWishlist">
                                                    <i class="fas fa-heart ${wishlist.includes(p.id) ? 'text-red-500' : ''}"></i> ${lang.addToWishlist}
                                                </button>
                                                <button onclick="openFichaTecnicaModal('${p.id}')" class="bg-gray-600 text-white px-4 py-2 rounded-full hover:bg-gray-700 transition duration-200 mt-2 text-sm">
                                                    Ver Ficha Técnica
                                                </button>
                                            </div>
                                        </div>
                                    `).join('') :
                                    `<p class="col-span-full text-center text-gray-600 text-lg" data-translate="noProductsFound">${lang.noProductsFound || 'No se encontraron productos con los filtros seleccionados.'}</p>`
                                }
                            </div>
                        </section>
                    </div>
                `;
            }

            // Añade los event listeners para los filtros y el ordenamiento si la barra lateral está presente
            if (displaySidebar) {
                document.getElementById('filter-brand')?.addEventListener('change', applyFiltersAndSort);
                document.getElementById('filter-category')?.addEventListener('change', applyFiltersAndSort);
                document.getElementById('filter-benefit')?.addEventListener('change', applyFiltersAndSort);
                document.getElementById('filter-certification')?.addEventListener('change', applyFiltersAndSort);
                document.getElementById('filter-price-min')?.addEventListener('input', applyFiltersAndSort);
                document.getElementById('filter-price-max')?.addEventListener('input', applyFiltersAndSort);
                document.getElementById('sort-options')?.addEventListener('change', applyFiltersAndSort);
            }
            updateContentLanguage(); // Apply translations to newly rendered content
        }

        // Renderiza la página de detalle de un producto
        function renderProductDetail(productId) {
            console.log(`[renderProductDetail] Intentando renderizar el detalle del producto para el ID: ${productId}`);
            const product = products.find(p => p.id === productId);
            const lang = translations[currentLanguage];

            if (!product) {
                if (appContent) appContent.innerHTML = `<p class="text-center text-red-500 text-xl">Producto no encontrado.</p>`;
                console.error(`[renderProductDetail] Producto con ID: ${productId} no encontrado.`);
                return;
            }
            console.log(`[renderProductDetail] Producto encontrado: ${product.name}`);

            // Obtiene los textos en el idioma actual, o en español por defecto
            const descriptionText = product[`description_${currentLanguage}`] || product.description_es || 'No description available.';
            const ingredientsText = product[`ingredients_${currentLanguage}`] || product.ingredients_es || 'No ingredients listed.';
            const usageText = product[`usage_${currentLanguage}`] || product.usage_es || 'No usage instructions provided.';
            const warningsText = product[`warnings_${currentLanguage}`] || product.warnings_es || 'No warnings available.';
            
            // Los detalles clave (origen, proceso, características)
            const originText = product[`origin_${currentLanguage}`] || product.origin_es || '';
            const processText = product[`process_${currentLanguage}`] || product.process_es || '';
            const characteristicsText = product[`characteristics_${currentLanguage}`] || product.characteristics_es || '';

            // Obtiene los beneficios en el idioma actual, o en español por defecto
            const benefitsList = product[`benefits_${currentLanguage}`] || product.benefits_es || [];


            if (appContent) { 
                appContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-8 flex flex-col lg:flex-row gap-8">
                        <div class="lg:w-1/2 flex justify-center items-center">
                            <img src="${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x600/D3D3D3/000000?text=Imagen+No+Disp';" class="max-w-full h-auto rounded-lg shadow-md object-contain">
                        </div>
                        <div class="lg:w-1/2">
                            <h1 class="text-4xl font-bold text-primary mb-2">${product.name}</h1>
                            <p class="text-xl text-gray-700 mb-4">${product.brand}</p>
                            <p class="text-5xl font-extrabold text-green-600 mb-6">${formatPrice(product.priceDetail)} ${product.priceWholesale && product.priceWholesale !== product.priceDetail ? `<span class="text-sm text-gray-500">(RD$${(product.priceWholesale || 0).toFixed(2)} Mayor)</span>` : ''}</p>
                            
                            <div class="flex items-center justify-start space-x-2 mb-4">
                                <button onclick="updateProductQuantityInCart('${product.id}', -1)" class="bg-gray-200 text-gray-700 w-10 h-10 rounded-full hover:bg-gray-300 transition duration-200 text-lg">-</button>
                                <input type="number" min="0" value="${(cart.find(item => item.productId === product.id)?.quantity || 0)}" 
                                       data-product-id="${product.id}" 
                                       onchange="updateProductQuantityInCartFromInput(this, '${product.id}')"
                                       onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                                       class="w-20 text-center border border-gray-300 rounded-md p-2 text-lg focus:outline-none focus:ring-2 focus:ring-primary">
                                <button onclick="updateProductQuantityInCart('${product.id}', 1)" class="bg-gray-200 text-gray-700 w-10 h-10 rounded-full hover:bg-gray-300 transition duration-200 text-lg">+</button>
                            </div>
                            <button onclick="addToCart('${product.id}')" class="w-full bg-primary text-white text-xl py-3 rounded-full hover:bg-green-700 transition duration-200 mb-4" data-translate="addToCart">
                                <i class="fas fa-cart-plus mr-2"></i> ${lang.addToCart}
                            </button>
                            <button onclick="addToWishlist('${product.id}', 'product')" class="w-full bg-gray-200 text-gray-700 text-xl py-3 rounded-full hover:bg-gray-300 transition duration-200 mb-4" data-translate="addToWishlist">
                                <i class="fas fa-heart ${wishlist.includes(product.id) ? 'text-red-500' : ''}"></i> ${lang.addToWishlist}
                            </button>
                            <button onclick="openFichaTecnicaModal('${product.id}')" class="w-full bg-gray-600 text-white text-xl py-3 rounded-full hover:bg-gray-700 transition duration-200 mb-8">
                                                Ver Ficha Técnica
                                            </button>


                            <!-- Tabs para Descripción, Ingredientes, Uso, Advertencias, Reseñas -->
                            <div class="border-b border-gray-200">
                                <nav class="-mb-px flex space-x-8 overflow-x-auto pb-2" aria-label="Tabs">
                                    <button class="tab-button text-primary whitespace-nowrap py-4 px-1 border-b-2 border-primary font-medium text-lg" data-tab="description" data-translate="description">${lang.description}</button>
                                    <button class="tab-button text-gray-500 hover:text-gray-700 whitespace-nowrap py-4 px-1 border-b-2 border-transparent hover:border-gray-300 font-medium text-lg" data-tab="ingredients" data-translate="ingredients">${lang.ingredients}</button>
                                    <button class="tab-button text-gray-500 hover:text-gray-700 whitespace-nowrap py-4 px-1 border-b-2 border-transparent hover:border-gray-300 font-medium text-lg" data-tab="usage" data-translate="usage">${lang.usage}</button>
                                    <button class="tab-button text-gray-500 hover:text-gray-700 whitespace-nowrap py-4 px-1 border-b-2 border-transparent hover:border-gray-300 font-medium text-lg" data-tab="warnings" data-translate="warnings">${lang.warnings}</button>
                                    <button class="tab-button text-gray-500 hover:text-gray-700 whitespace-nowrap py-4 px-1 border-b-2 border-transparent hover:border-gray-300 font-medium text-lg" data-tab="reviews" data-translate="reviews">${lang.reviews}</button>
                                </nav>
                            </div>

                            <div id="tab-content" class="mt-6 text-gray-800 leading-relaxed">
                                <div id="tab-description" class="tab-pane active">
                                    <p class="mb-4">${descriptionText}</p>
                                    ${(originText || processText || characteristicsText) ? `
                                        <h4 class="text-xl font-semibold text-primary mt-6 mb-2" data-translate="keyDetails">${lang.keyDetails}:</h4>
                                        ${originText ? `<p><strong>${lang.origin}:</strong> ${originText}</p>` : ''}
                                        ${processText ? `<p><strong>${lang.process}:</strong> ${processText}</p>` : ''}
                                        ${characteristicsText ? `<p><strong>${lang.characteristics}:</strong> ${characteristicsText}</p>` : ''}
                                    ` : ''}
                                    ${benefitsList && benefitsList.length > 0 ? `
                                        <h4 class="text-xl font-semibold text-primary mt-6 mb-2" data-translate="benefits">${lang.benefits}:</h4>
                                        <ul class="list-disc list-inside ml-4 space-y-1">
                                            ${benefitsList.map(benefit => `<li>${benefit}</li>`).join('')}
                                        </ul>
                                    ` : ''}
                                </div>
                                <div id="tab-ingredients" class="tab-pane hidden">${ingredientsText}</div>
                                <div id="tab-usage" class="tab-pane hidden">${usageText}</div>
                                <div id="tab-warnings" class="tab-pane hidden">${warningsText}</div>
                                <div id="tab-reviews" class="tab-pane hidden">
                                    <p class="mb-4 text-gray-600" data-translate="reviewsDisclaimer">${lang.reviewsDisclaimer}</p>
                                </div>
                            </div>

                            <div class="mt-8">
                                <h3 class="text-xl font-semibold text-primary mb-3">Certificaciones:</h3>
                                <div class="flex flex-wrap gap-3">
                                    ${(product.certifications || []).map(cert => `
                                        <span class="bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full">${cert}</span>
                                    `).join('')}
                                </div>
                            </div>

                            <div class="mt-8">
                                <h3 class="text-xl font-semibold text-primary mb-4" data-translate="relatedProducts">${lang.relatedProducts}</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    ${products.filter(p => p.category === product.category && p.id !== product.id).slice(0, 2).map(p => `
                                        <a href="#product-${p.id}" onclick="navigateTo('product', '${p.id}', event)" class="block bg-gray-50 rounded-lg p-3 text-center hover:bg-gray-100 transition duration-200">
                                            <img src="${p.image}" alt="${p.name}" onerror="this.onerror=null;this.src='https://placehold.co/100x100/D3D3D3/000000?text=Imagen+No+Disp';" class="w-24 h-24 object-contain mx-auto mb-2">
                                            <p class="text-sm font-medium text-gray-700">${p.name}</p>
                                            <p class="text-md font-bold text-primary">${formatPrice(p.priceDetail)}</p>
                                        </a>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Añade event listeners para los botones de las pestañas
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    // Desactiva todas las pestañas
                    document.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('text-primary', 'border-primary');
                        btn.classList.add('text-gray-500', 'hover:text-gray-700', 'border-transparent', 'hover:border-gray-300'); // Corrected hover class
                    });
                    // Activa la pestaña clickeada
                    this.classList.add('text-primary', 'border-primary');
                    this.classList.remove('text-gray-500', 'hover:text-gray-700', 'border-transparent', 'hover:border-gray-300'); // Corrected hover class

                    // Oculta todos los paneles de contenido y muestra el correspondiente a la pestaña clickeada
                    document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.add('hidden'));
                    document.getElementById(`tab-${this.dataset.tab}`).classList.remove('hidden');
                });
            });
            updateContentLanguage(); // Apply translations to newly rendered content
        }

        // Renderiza la página de detalle de un combo
        function renderComboDetail(comboId) {
            const combo = combos.find(c => c.id === comboId);
            const lang = translations[currentLanguage];

            if (!combo) {
                if (appContent) appContent.innerHTML = `<p class="text-center text-red-500 text-xl">Combo no encontrado.</p>`;
                return;
            }

            const descriptionText = combo[`description_${currentLanguage}`] || combo.description_es;

            const productsInComboHtml = combo.productsIncluded.map(item => {
                const product = products.find(p => p.id === item.id);
                if (!product) return ''; // Salta si el producto no se encuentra

                const productBenefits = item[`benefits_${currentLanguage}`] || item.benefits_es || [];

                return `
                    <div class="flex items-start gap-4 p-4 border border-gray-200 rounded-lg shadow-sm bg-gray-50">
                        <img src="${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/100x100/D3D3D3/000000?text=NP';" class="w-24 h-24 object-contain rounded-md flex-shrink-0">
                        <div class="flex-grow">
                            <h4 class="text-lg font-semibold text-gray-800 mb-1">${product.name} (x${item.quantity})</h4>
                            <p class="text-gray-600 text-sm mb-2">${product[`description_${currentLanguage}`] || product.description_es || 'Descripción no disponible.'}</p>
                            ${productBenefits && productBenefits.length > 0 ? `
                                <p class="text-gray-700 font-medium mt-2">${lang.benefits}:</p>
                                <ul class="list-disc list-inside text-sm text-gray-600 ml-4">
                                    ${productBenefits.map(benefit => `<li>${benefit}</li>`).join('')}
                                </ul>
                            ` : ''}
                            <a href="#product-${product.id}" onclick="navigateTo('product', '${product.id}', event)" class="text-primary text-sm hover:underline mt-2 inline-block">Ver más detalles del producto</a>
                        </div>
                    </div>
                `;
            }).join('');

            if (appContent) { 
                appContent.innerHTML = `
                    <div class="bg-white rounded-lg shadow-lg p-8 flex flex-col lg:flex-row gap-8">
                        <div class="lg:w-1/2 flex justify-center items-center">
                            <img src="${combo.image}" alt="${combo.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x600/D3D3D3/000000?text=Combo+Image';" class="max-w-full h-auto rounded-lg shadow-md object-contain">
                        </div>
                        <div class="lg:w-1/2">
                            <h1 class="text-4xl font-bold text-primary mb-2">${combo.name}</h1>
                            <p class="text-xl text-gray-700 mb-4">${descriptionText}</p>
                            <p class="text-5xl font-extrabold text-red-600 mb-6">${formatPrice(combo.price)} <span class="text-sm text-gray-500 line-through">${formatPrice(combo.originalPrice)}</span></p>
                            
                            <button onclick="addToCartCombo('${combo.id}')" class="w-full bg-primary text-white text-xl py-3 rounded-full hover:bg-green-700 transition duration-200 mb-4" data-translate="addToCart">
                                <i class="fas fa-cart-plus mr-2"></i> ${lang.addToCart}
                            </button>
                            <button onclick="addToWishlist('${combo.id}', 'combo')" class="w-full bg-gray-200 text-gray-700 text-xl py-3 rounded-full hover:bg-gray-300 transition duration-200 mb-8" data-translate="addToWishlist">
                                <i class="fas fa-heart ${wishlist.includes(combo.id) ? 'text-red-500' : ''}"></i> ${lang.addToWishlist}
                            </button>

                            <div class="mt-8">
                                <h3 class="text-2xl font-semibold text-primary mb-4" data-translate="productsInCombo">${lang.productsInCombo}</h3>
                                <div class="space-y-4">
                                    ${productsInComboHtml}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            updateContentLanguage(); // Apply translations to newly rendered content
        }


        /**
         * Renderiza la página del carrito, mostrando los artículos, cantidades y totales.
         */
        function renderCart() {
            console.log("[renderCart] Iniciando función renderCart.");
            const lang = translations[currentLanguage];
            let cartContent = '';

            if (cart.length === 0) {
                cartContent = `<p class="text-center text-gray-600 text-xl py-10" data-translate="cartEmpty">${lang.cartEmpty}</p>`;
            } else {
                cartContent = `
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white rounded-lg shadow-md mb-8">
                            <thead>
                                <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                                    <th class="py-3 px-6 text-left" data-translate="item">${lang.item}</th>
                                    <th class="py-3 px-6 text-center" data-translate="price">${lang.price}</th>
                                    <th class="py-3 px-6 text-center" data-translate="quantity">${lang.quantity}</th>
                                    <th class="py-3 px-6 text-center" data-translate="subtotal">${lang.subtotal}</th>
                                    <th class="py-3 px-6 text-center"></th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-600 text-sm font-light">
                                ${cart.map(item => {
                                    const isCombo = item.type === 'combo';
                                    let name, image, pricePerUnit;

                                    if (isCombo) {
                                        const combo = combos.find(c => c.id === item.productId);
                                        name = combo ? combo.name : 'Combo Desconocido';
                                        image = combo ? combo.image : '';
                                        pricePerUnit = combo ? combo.price : 0;
                                    } else {
                                        const product = products.find(p => p.id === item.productId);
                                        name = product ? product.name : 'Producto Desconocido';
                                        image = product ? product.image : '';
                                        // Asegúrate de usar getPricePerUnit aquí también para la visualización del carrito
                                        pricePerUnit = product ? getPricePerUnit(product, item.quantity) : 0;
                                    }

                                    const itemSubtotal = pricePerUnit * item.quantity; 
                                    return `
                                        <tr class="border-b border-gray-200 hover:bg-gray-50">
                                            <td class="py-3 px-6 text-left whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="mr-3">
                                                        <img class="w-10 h-10 rounded-full object-contain" src="${image}" alt="${name}" onerror="this.onerror=null;this.src='https://placehold.co/40x40/D3D3D3/000000?text=NP';">
                                                    </div>
                                                    <span class="font-medium">${name}</span>
                                                </div>
                                            </td>
                                            <td class="py-3 px-6 text-center">${formatPrice(pricePerUnit)}</td>
                                            <td class="py-3 px-6 text-center">
                                                <div class="flex items-center justify-center space-x-2">
                                                    <button onclick="updateQuantity('${item.productId}', -1)" class="bg-gray-200 text-gray-700 w-8 h-8 rounded-full hover:bg-gray-300 transition duration-200">-</button>
                                                    <span class="text-base font-semibold">${item.quantity}</span>
                                                    <button onclick="updateQuantity('${item.productId}', 1)" class="bg-gray-200 text-gray-700 w-8 h-8 rounded-full hover:bg-gray-300 transition duration-200">+</button>
                                                </div>
                                            </td>
                                            <td class="py-3 px-6 text-center font-semibold">${formatPrice(itemSubtotal)}</td>
                                            <td class="py-3 px-6 text-center">
                                                <button onclick="removeFromCart('${item.productId}')" class="text-red-500 hover:text-red-700 transition duration-200" data-translate="removeItem">
                                                    <i class="fas fa-trash"></i> ${lang.removeItem}
                                                </button>
                                            </td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>

                    <div class="flex flex-col items-end space-y-4 w-full">
                        <!-- Resumen de Totales -->
                        <div class="bg-gray-100 p-4 rounded-lg w-full md:w-1/2 lg:w-1/3 shadow-inner">
                            <div class="flex justify-between text-lg font-semibold text-gray-700 mb-2">
                                <span id="display-subtotal-label" data-translate="subtotal">${lang.subtotal}</span>
                                <span id="display-subtotal">${formatPrice(0)}</span>
                            </div>
                            <div class="flex justify-between text-lg font-semibold text-gray-700 mb-2">
                                <span id="display-discount-label" data-translate="discount">${lang.discount}</span>
                                <span id="display-discount">-${formatPrice(0)}</span>
                            </div>
                            <div class="flex justify-between text-lg font-semibold text-gray-700 mb-4 border-b pb-2">
                                <span id="display-shippingCost-label" data-translate="shippingCost">${lang.shippingCost}</span>
                                <span id="display-shippingCost"></span>
                            </div>
                            <div class="flex justify-between text-2xl font-bold text-primary">
                                <span id="display-total-label" data-translate="total">${lang.total}</span>
                                <span id="display-total"></span>
                            </div>
                        </div>
                        
                        <!-- Formulario de Datos del Cliente -->
                        <div class="w-full lg:w-1/2 p-4 bg-gray-50 rounded-lg shadow-inner mt-6">
                            <h3 class="text-xl font-semibold text-primary mb-4" data-translate="contactDetails">${lang.contactDetails}</h3>
                            <div class="space-y-3">
                                <div>
                                    <label for="customer-name" class="block text-gray-700 text-sm font-medium mb-1" data-translate="fullName">${lang.fullName} <span class="text-red-500">*</span></label>
                                    <input type="text" id="customer-name" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="${lang.yourNamePlaceholder}" required>
                                </div>
                                <div>
                                    <label for="customer-address" class="block text-gray-700 text-sm font-medium mb-1" data-translate="deliveryAddress">${lang.deliveryAddress} <span class="text-red-500">*</span></label>
                                    <input type="text" id="customer-address" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="${lang.yourAddressPlaceholder}" required>
                                </div>
                                <div>
                                    <label for="customer-phone-order" class="block text-gray-700 text-sm font-medium mb-1" data-translate="yourPhoneNumber">${lang.yourPhoneNumber} <span class="text-red-500">*</span></label>
                                    <input type="tel" id="customer-phone-order" class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary" placeholder="${lang.yourPhonePlaceholder}" required>
                                </div>
                            </div>

                            <!-- Método de Entrega -->
                            <div class="mt-6">
                                <h4 class="text-lg font-semibold text-gray-800 mb-3" data-translate="deliveryMethod">${lang.deliveryMethod} <span class="text-red-500">*</span></h4>
                                <div class="flex flex-col space-y-2">
                                    <label class="inline-flex items-center">
                                        <input type="radio" class="form-radio text-primary h-5 w-5" name="delivery-method" value="A Domicilio" id="delivery-home">
                                        <span class="ml-2 text-gray-700" data-translate="homeDelivery">${lang.homeDelivery}</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="radio" class="form-radio text-primary h-5 w-5" name="delivery-method" value="Recoger en Tienda" id="delivery-store">
                                        <span class="ml-2 text-gray-700" data-translate="storePickup">${lang.storePickup}</span>
                                    </label>
                                </div>
                                <!-- Notas sobre el Costo de Envío -->
                                <div id="delivery-cost-notes" class="mt-3 text-sm text-gray-600 p-3 bg-gray-100 rounded-md">
                                    <p data-translate="deliveryCostNoteSantoDomingo">${lang.deliveryCostNoteSantoDomingo}</p>
                                    <p data-translate="deliveryCostNoteOutside">${lang.deliveryCostNoteOutside}</p>
                                </div>
                            </div>

                            <!-- Método de Pago -->
                            <div class="mt-6">
                                <h4 class="text-lg font-semibold text-gray-800 mb-3" data-translate="paymentMethod">${lang.paymentMethod} <span class="text-red-500">*</span></h4>
                                <div class="flex flex-col space-y-2">
                                    <label class="inline-flex items-center">
                                        <input type="radio" class="form-radio text-primary h-5 w-5" name="payment-method" value="Efectivo" id="payment-cash">
                                        <span class="ml-2 text-gray-700" data-translate="cash">${lang.cash}</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="radio" class="form-radio text-primary h-5 w-5" name="payment-method" value="Transferencia Bancaria" id="payment-transfer">
                                        <span class="ml-2 text-gray-700" data-translate="bankTransfer">${lang.bankTransfer}</span>
                                    </label>
                                </div>
                                <!-- Detalles de Cuentas Bancarias (Inicialmente oculto, se muestra al seleccionar Transferencia Bancaria) -->
                                <div id="bank-accounts-details" class="mt-3 text-sm text-gray-600 p-3 bg-gray-100 rounded-md hidden">
                                    <p class="font-semibold mb-2" data-translate="bankAccounts">${lang.bankAccounts}:</p>
                                    <ul class="list-disc list-inside space-y-1">
                                        <li data-translate="bankPopular">${lang.bankPopular}</li>
                                        <li data-translate="banreservas">${lang.banreservas}</li>
                                        <li data-translate="bhd">${lang.bhd}</li>
                                    </ul>
                                </div>
                                <!-- Nota de Confirmación de Pago -->
                                <p id="payment-confirmation-note" class="mt-4 text-sm text-red-600 font-medium" data-translate="paymentConfirmationNote">
                                    ${lang.paymentConfirmationNote}
                                </p>
                            </div>
                            <!-- Nueva Nota de Descuento -->
                            <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800">
                                <p class="text-sm" data-translate="discountNote">
                                    ${lang.discountNote}
                                </p>
                            </div>
                        </div>

                        <div class="flex space-x-4 mt-6">
                            <button onclick="navigateTo('shop', null, event)" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-full hover:bg-gray-300 transition duration-200" data-translate="continueShopping">
                                ${lang.continueShopping}
                            </button>
                            <!-- Actualizado: El botón de Pagar ahora llama a la función checkoutOrder -->
                            <button onclick="checkoutOrder()" class="bg-primary text-white px-8 py-3 rounded-full hover:bg-green-700 transition duration-200" data-translate="checkout">
                                ${lang.checkout}
                            </button>
                        </div>
                    </div>
                `;
            }
            
            updateContentLanguage(); // Apply translations to newly rendered content
            toggleBankDetails(); 
            initCartFormListeners();
            calculateCartTotals();
            console.log("[renderCart] Función renderCart finalizada.");
        }

        /**
         * Renderiza la página de la lista de deseos, mostrando los artículos guardados por el usuario.
         */
        function renderWishlist() {
            const lang = translations[currentLanguage];
            let wishlistContent = '';

            if (wishlist.length === 0) {
                wishlistContent = `<p class="text-center text-gray-600 text-xl py-10" data-translate="noProductsInWishlist">${lang.noProductsInWishlist}</p>`;
            } else {
                wishlistContent = `
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${wishlist.map(itemId => {
                            const product = products.find(p => p.id === itemId);
                            const combo = combos.find(c => c.id === itemId);
                            const item = product || combo; // Podría ser un producto o un combo

                            if (!item) return ''; // Ignora si el artículo no se encuentra

                            const isCombo = !!combo; // Verifica si es un combo

                            return `
                                <div class="bg-white rounded-lg shadow-md overflow-hidden hover-scale flex flex-col">
                                    <a href="#${isCombo ? 'combo' : 'product'}-${item.id}" onclick="navigateTo('${isCombo ? 'combo' : 'product'}', '${item.id}', event)" class="block">
                                        <img src="${item.image}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/400x400/D3D3D3/000000?text=Imagen+No+Disp';" class="w-full h-48 object-contain p-4 rounded-t-lg">
                                        <h3 class="text-lg font-semibold text-gray-800 mb-1 px-4 pt-2">${item.name}</h3>
                                    </a>
                                    <div class="p-4 flex-grow flex flex-col justify-between">
                                        <p class="text-xl font-bold text-primary mb-3">${formatPrice(item.price || item.priceDetail)}</p>
                                        <button onclick="addToCart('${item.id}', '${isCombo ? 'combo' : 'product'}')" class="bg-primary text-white px-4 py-2 rounded-full hover:bg-green-700 transition duration-200 mt-2">
                                            ${lang.addToCart}
                                        </button>
                                        <button onclick="removeFromWishlist('${item.id}')" class="bg-red-500 text-white px-4 py-2 rounded-full hover:bg-red-700 transition duration-200 mt-2">
                                            <i class="fas fa-trash"></i> ${lang.removeItem}
                                        </button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }

            if (appContent) { 
                appContent.innerHTML = `
                    <h1 class="text-4xl font-bold text-primary mb-8 text-center" data-translate="wishlistPageTitle">${lang.wishlistPageTitle}</h1>
                    ${wishlistContent}
                `;
            }
            updateContentLanguage(); // Apply translations to newly rendered content
        }


        // --- Event Listeners y Configuración Inicial ---

        // Event listener para cambios en el hash de la URL (para navegación)
        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.substring(1);
            const parts = hash.split('-');
            const page = parts[0];
            const param = parts.slice(1).join('-'); 
            console.log(`[hashchange] Cambio de hash detectado: page=${page}, param=${param}`);
            
            // Forzar renderizado incluso si el hash es el mismo para asegurar la actualización de UI/lenguaje
            renderPage(page, param);
           
        });

        /**
         * Renderiza el contenido de la página actual basándose en su nombre y parámetro opcional.
         * Esta función debe ser el ÚNICO punto de entrada para renderizar contenido basado en la navegación.
         * @param {string} page - El nombre de la página a renderizar.
         * @param {string} [param=null] - Un parámetro opcional para la página.
         */
        function renderPage(page, param = null) {
            console.log(`[renderPage] Renderizando página: ${page} con parámetro: ${param}`); 
            currentPage = page; 
            // Limpia cualquier intervalo de carrusel activo al navegar fuera de la página de inicio
            if (page !== 'home') {
                clearInterval(carouselInterval);
            }
            switch (page) {
                case 'home':
                    renderHome();
                    break;
                case 'shop':
                    let shopFilter = {};
                    let sortOption = document.getElementById('sort-options')?.value || 'relevance'; // Obtener el valor actual
                    let displaySidebar = true; // Por defecto, muestra la barra lateral para la página de la tienda

                    if (param) {
                        const parts = param.split('-');
                        if (parts[0] === 'category' && parts[1]) {
                            shopFilter.category = parts[1]; 
                        }
                    }
                    renderShop(shopFilter, sortOption, displaySidebar);
                    break;
                case 'product':
                    renderProductDetail(param);
                    break;
                case 'combo': 
                    renderComboDetail(param);
                    break;
                case 'cart':
                    renderCart();
                    break;
                case 'offers': 
                    renderShop({ isOffer: true }, 'relevance', false); 
                    break;
                case 'wishlist': 
                    renderWishlist();
                    break;
                // Páginas que usan renderGenericPage 
                case 'contact':
                    renderContact();
                    break;
                case 'help-faq':
                    renderHelpFAQ();
                    break;
                case 'blog':
                    renderBlog();
                    break;
                case 'privacy-policy':
                    renderPrivacyPolicy();
                    break;
                case 'terms-of-use':
                    renderTermsOfUse();
                    break;
                case 'shipping-policy':
                    renderShippingPolicy();
                    break;
                case 'return-policy':
                    renderReturnPolicy();
                    break;
                case 'payment-methods':
                    renderPaymentMethods();
                    break;
                case 'about-us': 
                    renderAboutUs();
                    break;
                default:
                    renderHome(); 
            }
            // Asegura que el campo de búsqueda se borre/reinicie al navegar fuera de la tienda/resultados de búsqueda
            if (searchInput && page !== 'shop') { 
                searchInput.value = '';
            }
            console.log(`[renderPage] Página ${page} renderizada exitosamente.`); 
        }

        /**
         * Rellena el menú desplegable de la tienda con categorías dinámicas.
         */
        function populateCategoryMenu() {
            const shopDropdown = document.querySelector('nav .group div.header-shop-dropdown');
            if (!shopDropdown) {
                console.error("Elemento de menú desplegable de la tienda no encontrado.");
                return;
            }

            shopDropdown.innerHTML = ''; // Limpia el contenido existente

            const categories = getUniqueCategories();
            categories.forEach(category => {
                const normalizedCategory = toKebabCase(category);
                const categoryLink = document.createElement('a');
                
                categoryLink.href = `#shop-category-${normalizedCategory}`;
                
                const translatedCategoryName = translations[currentLanguage][normalizedCategory] || category;
                categoryLink.textContent = translatedCategoryName;
                categoryLink.classList.add('block', 'px-4', 'py-2', 'text-sm', 'text-gray-700', 'hover:bg-gray-100', 'rounded-md');
                categoryLink.onclick = (e) => {
                    e.preventDefault();
                    navigateTo('shop', `category-${normalizedCategory}`, e);
                };
                shopDropdown.appendChild(categoryLink);
            });
        }

        /**
         * Aplica filtros y ordenamiento a la página de la tienda.
         * Esta función lee las selecciones actuales de filtro/ordenamiento del DOM y llama a renderShop.
         * @param {Object} [additionalFilter={}] - Parámetros de filtro adicionales opcionales (ej. de búsqueda o enlaces de categoría).
         */
        function applyFiltersAndSort(additionalFilter = {}) {
            const brandFilter = document.getElementById('filter-brand')?.value || '';
            const categoryFilterFromUI = document.getElementById('filter-category')?.value || '';
            const benefitFilter = document.getElementById('filter-benefit')?.value || '';
            const certificationFilter = document.getElementById('filter-certification')?.value || '';
            const minPriceFilter = parseFloat(document.getElementById('filter-price-min')?.value) || undefined;
            const maxPriceFilter = parseFloat(document.getElementById('filter-price-max')?.value) || undefined;
            const sortOption = document.getElementById('sort-options')?.value || 'relevance';

            const shouldDisplaySidebar = true; 

            const currentFilters = {
                brand: brandFilter,
                category: categoryFilterFromUI,
                benefit: benefitFilter,
                certification: certificationFilter,
                minPrice: minPriceFilter,
                maxPrice: maxPriceFilter,
                ...additionalFilter
            };
            
            renderShop(currentFilters, sortOption, shouldDisplaySidebar);
        }

        // DOMContentLoaded asegura que todo el HTML se haya analizado antes de ejecutar el script
        document.addEventListener('DOMContentLoaded', () => {
            console.log("Script loaded and DOM ready.");
            try {
                updateCartCount();
                updateWishlistCount();
                populateCategoryMenu();
                // Llamada inicial a renderPage dentro de DOMContentLoaded pero después de toda la configuración
                const initialHash = window.location.hash.substring(1);
                const initialParts = initialHash.split('-');
                const initialPage = initialParts[0] || 'home';
                const initialParam = initialParts.slice(1).join('-');
                renderPage(initialPage, initialParam);
                // La llamada a updateContentLanguage() aquí es importante para los elementos fuera del app-content
                updateContentLanguage(); 
                console.log("[DOMContentLoaded] Página inicial renderizada.");

                // Event listener para los botones de cambio de idioma
                document.getElementById('language-toggle')?.parentNode?.querySelectorAll('button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        currentLanguage = e.target.dataset.lang;
                        // Forzar re-renderizado de la página actual para aplicar todas las traducciones
                        const currentHash = window.location.hash.substring(1);
                        const parts = currentHash.split('-');
                        const page = parts[0] || 'home';
                        const param = parts.slice(1).join('-');
                        renderPage(page, param); // Force re-render of current page
                        // updateContentLanguage() ya se llama dentro de renderPage, no es necesario aquí.
                        console.log(`Idioma cambiado a: ${currentLanguage}. Página re-renderizada.`);
                    });
                });

                // Event listener para el clic del botón de búsqueda
                document.getElementById('search-button')?.addEventListener('click', (event) => {
                    const searchQuery = searchInput ? searchInput.value : '';
                    console.log(`Botón de búsqueda clickeado. Consulta: ${searchQuery}`);
                    navigateTo('shop', null, event); 
                    setTimeout(() => applyFiltersAndSort({ searchQuery: searchQuery }), 0); 
                });

                // Event listener para la tecla Enter en el campo de búsqueda
                searchInput?.addEventListener('keypress', (e) => { 
                    if (e.key === 'Enter') {
                        const searchQuery = searchInput ? searchInput.value : '';
                        console.log(`Se presionó Enter en el campo de búsqueda. Consulta: ${searchQuery}`);
                        navigateTo('shop', null, e); 
                        setTimeout(() => applyFiltersAndSort({ searchQuery: searchQuery }), 0); 
                    }
                });

                // Event listener para el envío del formulario de Newsletter
                document.getElementById('newsletter-form')?.addEventListener('submit', function(event) { 
                    event.preventDefault(); 
                    const emailInput = this.querySelector('input[type="email"]');
                    if (emailInput && emailInput.value.trim() !== '') { 
                        showModal(translations[currentLanguage].newsletter, translations[currentLanguage].subscribedNewsletter || '¡Gracias por suscribirte a nuestro newsletter!');
                        emailInput.value = ''; 
                    } else {
                        showModal(translations[currentLanguage].newsletter, translations[currentLanguage].invalidEmail || 'Por favor, introduce un correo electrónico válido.');
                    }
                });
            } catch (error) {
                console.error("Uncaught error during DOMContentLoaded:", error);
                // Muestra un mensaje de error amigable en la página si algo sale mal
                if (appContent) {
                    appContent.innerHTML = `<div class="text-center text-red-500 text-xl py-10">
                        <h1 class="text-3xl font-bold mb-4">¡Oops! Algo salió mal.</h1>
                        <p>Parece que ha ocurrido un error al cargar la página. Por favor, intenta recargar.</p>
                        <p class="text-sm text-gray-500 mt-2">Detalles técnicos: ${error.message}</p>
                    </div>`;
                }
            }
        });
    </script>
</body>
</html>
